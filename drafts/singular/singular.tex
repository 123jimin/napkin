\documentclass[11pt]{scrreprt}
\input{../../tex/preamble}
\def\asydir{}
\addbibresource{../../references.bib}
\renewcommand{\gim}{($\ast$)}

\begin{document}
\title{Singular Homology}
\maketitle

\chapter{Some Topological Constructions}
\section{Product Topology}
\section{Quotient Topology}
\section{Wedge Product}
\section{CW Complexes}

\chapter{Singular Homology}
Now that we've defined $\pi_1(X)$, we turn our attention to a second way of capturing the same idea, $H_1(X)$.
We'll then define $H_n(X)$ for $n \ge 2$.
The good thing about the $H_n$ groups is that, unlike the $\pi_n$ groups, they are much easier to compute in practice.
The downside is that they are a little more involved to compute,
and the ``algebraic'' part of ``algebraic topology'' will become a lot more technical.

\section{Simplices and Boundaries}
\prototype{$\partial[v_0, v_1, v_2] = [v_0,v_1]-[v_0,v_2]+[v_1,v_2]$.}
First things first:
\begin{definition}
	The \vocab{standard $n$-simplex}, denoted $\Delta^n$, is defined as
	\[ \left\{ (x_0 , x_1, \dots x_n) \mid x_i \ge 0, x_0+\dots+x_n=1 \right\}. \]
	Hence it's the convex hull of some vertices $[v_0, \dots, v_n]$.
	Note that we keep track of the order $v_0$, \dots, $v_n$ of the vertices,
	for reasons that will soon become clear.

	Given a topological space $X$, a \vocab{singular $n$-simplex} is a map $\sigma : \Delta^n \to X$.
\end{definition}
\begin{example}
	[Singular Simplices]
	\listhack
	\label{ex:simplex}
	\begin{enumerate}[(a)]
		\ii Since $\Delta^0 = [v_0]$ is just a point,
		a singular $0$-simplex $X$ is just a point of $X$.
		\ii Since $\Delta^1 = [v_0, v_1]$ is an interval,
		a singular $1$-simplex $X$ is just a path in $X$.
		\ii Since $\Delta^2 = [v_0, v_1, v_2]$ is an equilateral triangle,
		a singular $2$-simplex $X$ looks a ``disk'' in $X$.
	\end{enumerate}
	Here is a picture of all three in a space $X$:
	\begin{center}
		\begin{asy}
			size(8cm);
			bigblob("$X$");
			dot("$\sigma^0$", (-3.7,2.5), dir(-90));

			pen hg = heavygreen;
			pair A0 = (-2.7, 1.1);
			pair A1 = (-2.9, -2.3);
			dot("$v_0$", A0, dir(90), hg);
			dot("$v_1$", A1, dir(-90), hg);
			path s1 = A0..(-3.1,0.7)..A1;
			draw(s1, hg, EndArrow);
			label("$\sigma^1$", s1, dir(10), hg);

			pen rr = red;
			pair B0 = (1, 1.8);
			pair B1 = (-0.7, -1.1);
			pair B2 = (1.9, -1.9);
			dot("$v_0$", B0, dir(90), rr);
			dot("$v_1$", B1, dir(210), rr);
			dot("$v_2$", B2, dir(330), rr);
			pair b0 = (0,0);
			pair b1 = (0,-2);
			pair b2 = (1.6,0.3);
			draw(B0..b0..B1, rr, EndArrow);
			draw(B1..b1..B2, rr, EndArrow);
			draw(B2..b2..B0, rr, EndArrow);
			fill(B0..b0..B1--B1..b1..B2--B2..b2..B0--cycle, lightred+opacity(0.2));
			label("$\sigma^2$", centroid(B0, B1, B2), rr);
		\end{asy}
	\end{center}
	The arrows aren't strictly necessary, but I've included them
	to help keep track of the ``order'' of the vertices;
	this will be useful in just a moment.
\end{example}

Now we're going to do something much like when we were talking about Stoke's Theorem:
we'll put a boundary $\partial$ operator on the singular $n$-simplices.
This will give us a formal linear sums of $n$-simplices $\sum_k a_k \sigma_k$,
which we call a \vocab{$n$-chain}.

In that case,
\begin{definition}
	Given a singular $n$-simplex $\sigma$ with vertices $[v_0, \dots, v_n]$,
	note that for every $i$ we have an $(n-1)$ simplex $[v_0, \dots, v_{i-1}, v_{i+1}, \dots, v_n]$.
	The \vocab{boundary operator} $\partial$ is then defined by
	\[ \partial(\sigma) \defeq \sum_i (-1)^i
		\left[ v_0, \dots, v_{i-1}, v_{i+1}, \dots, v_n \right]. \]
	The boundary operator then extends linearly to $n$-chains:
	\[ \partial\left( \sum_k a_k \sigma_k \right) \defeq \sum a_k \partial(\sigma_k). \]
	By convention, a $0$-chain has empty boundary.
\end{definition}
\begin{example}
	[Boundary Operator]
	Consider the chains depicted in \Cref{ex:simplex}. Then
	\begin{enumerate}[(a)]
		\ii $\partial\sigma^0 = 0$.
		\ii $\partial(\sigma^1) = [v_1] - [v_0]$:
		it's the ``difference'' of the $0$-chain corresponding to point $v_1$
		and the $0$-chain corresponding to point $v_0$.
		\ii $\partial(\sigma^2) = [v_0,v_1] - [v_0,v_2] + [v_1, v_2]$;
		i.e. one can think of it as the sum of the three oriented arrows
		which make up the ``sides'' of $\sigma^2$.
		\ii Notice that if we take the boundary again, we get
		\begin{align*}
			\partial(\partial(\sigma^2))
			&= \partial([v_0,v_1]) - \partial([v_0,v_2]) + \partial([v_1,v_2]) \\
			&= \left( [v_1]-[v_0] \right) - \left( [v_2]-[v_0] \right) + \left( [v_2]-[v_1] \right)  \\
			&= 0.
		\end{align*}
	\end{enumerate}
\end{example}

The fact that $\partial^2 = 0$ is of course not a coincidence.
\begin{theorem}
	[$\partial^2=0$]
	For any chain $c$, $\partial(\partial(c)) = 0$.
\end{theorem}
\begin{proof}
	Essentially identical to \Cref{prob:partial_zero}:
	this is just a matter of writing down a bunch of $\sum$ signs.
	Diligent readers are welcome to try the computation.
\end{proof}

\section{The Singular Homology Groups}
\prototype{Probably $H_n(S^m)$, especially the case $m = n =1$.}
Let $X$ be a topological space, and let $C_n(X)$ be the free abelian group
of $n$-chains of $X$ that we defined earlier.
Our work above gives us a boundary operator $\partial$, so we have a sequence of maps
\[ \dots \taking\partial C_3(X) \taking\partial C_2(X)
	\taking\partial C_1(X) \taking\partial C_0(X) \taking\partial 0 \]
(here I'm using $0$ to for the trivial group, which is standard notation for abelian groups.)
We'll call this the \vocab{singular chain complex}.

Now, how does this let us detect holes in the space?
To see why, let's consider the following annulus, with a $1$-chain $c$ drawn into it in red:
\begin{center}
	\begin{asy}
		size(6cm);
		pair O = origin;
		filldraw(CR(O, 6), lightblue+opacity(0.2), blue);
		filldraw(CR(O, 1), white, blue);
		label("$X$", 6*dir(45), dir(45));
		pen rr = red;
		pair v0 = 5*dir(100);
		pair v1 = 4*dir(220);
		pair v2 = 2.2*dir(330);
		dot("$v_0$", v0, dir(v0), rr);
		dot("$v_1$", v1, dir(v1), rr);
		dot("$v_2$", v2, dir(v2), rr);
		draw(v0..(3.2*dir(110))..v1, rr, EndArrow);
		draw(v1..(2.1*dir(270))..v2, rr, EndArrow);
		draw(v2..(3.6*dir(45))..v0, rr, EndArrow);
	\end{asy}
\end{center}
Notice that 
\[ \partial c = ([v_1]-[v_0]) - ([v_2]-[v_0]) + ([v_2]-[v_1]) = 0 \]
and so we can say this $1$-chain $c$ is a ``cycle'',
because it has trivial boundary.
However, $c$ is not itself the boundary of any $2$-chain,
because of the hole in the center of the space
--- it's impossible to ``fill in'' the interior of $c$!
So, we have detected the hole by the algebraic fact that 
\[ c \in \ker\left( C_1(X) \taking{\partial} C_0(X) \right)
	\qquad\text{but}\qquad
	c \notin \img \left( C_2(X) \taking{\partial} C_1(X) \right). \]
Indeed, if the hole was not present then this statement would be false.

We can capture this idea in any dimension, as follows.
\begin{definition}
	Let 
	\[ \dots \taking\partial C_2(X) \taking\partial C_1(X) \taking\partial C_0(X) \taking\partial 0 \]
	as above.
	We say that $c \in C_n(X)$ is:
	\begin{itemize}
		\ii a \vocab{cycle} if $\partial c \in \ker\left( C_{n}(X) \taking\partial C_{n-1}(X) \right)$, and
		\ii a \vocab{boundary} if $c \in \img \left( C_{n+1}(X) \taking\partial C_n(X) \right)$.
	\end{itemize}
	Denote the cycles and boundaries by $Z_n(X), B_n(X) \subseteq C_n(X)$, respectively.
\end{definition}

\begin{ques}
	Just to get you used the notation:
	check that $B_n$ and $Z_n$ are themselves abelian groups,
	and that $B_n(X) \subseteq Z_n(X) \subseteq C_n(X)$.
\end{ques}

The key point is that we can now define:
\begin{definition}
	The \vocab{$n$th homology group} $H_n(X)$ is
	defined as \[ H_n(X) \defeq Z_n(X) / B_n(X). \]
\end{definition}
\begin{example}
	[The Zeroth Homology Group]
	Let's compute $H_0(X)$ for a topological space $X$.
	We take $C_0(X)$, which is just formal linear sums of points of $X$.

	First, we consider the kernel of $\partial : C_0(X) \to 0$,
	so the kernel of $\partial$ is the entire space $C_0(X)$:
	that is, every point is a ``cycle''.

	Now, what is the boundary?
	The main idea is that $[b] - [a] = 0$ if and only if
	there's a $1$-chain which connects $a$ to $b$, i.e.\
	there is a path from $a$ to $b$.
	In particular,
	\[ \text{$X$ path connected} \implies H_0(X) \cong \ZZ. \]
\end{example}
More generally, we have
\begin{proposition}[Homology Groups Split Into Path-Connected Components]
	If $X = \bigcup_\alpha X_\alpha$ is a decomposition into path-connected components,
	then we have \[ H_n(X) \cong \bigoplus_\alpha H_n(X_\alpha). \]
	In particular, if $X$ has $r$ path-connected components, then $H_0(X) \cong \ZZ^{\oplus r}$.
\end{proposition}
(If it's surprising to see $\ZZ^{\oplus r}$, remember that
an abelian group is the same thing as a $\ZZ$-module,
so the notation $G \oplus H$ is customary in place of $G \times H$
when $G$, $H$ are abelian.)

Now let's investigate the first homology group.
Formally, for $X$ path-connected,
\begin{center}
	$H_1(X)$ is the \emph{abelianization} of $\pi_1(X, x_0)$.
\end{center}
Roughly, as you can see from the example, $H_1(X)$ captures the same information
as $\pi_1(X, x_0)$: a cycle (in $Z_1(X)$) corresponds to the same thing
as the loops we studied in $\pi_1(X, x_0)$,
and the boundaries (in $B_1(X)$, i.e.\ the things we mod out by)
are exactly the nulhomotopic loops in $\pi_1(X, x_0)$.
The difference is that $H_1(X)$ allows loops to commute, whereas $\pi_1(X, x_0)$ does not.
\begin{example}
	[The First Homology Group of the Annulus]
	To give a concrete example, consider the annulus $X$ above.
	We found a chain $c$ that wrapped once around the hole of $X$.
	The point is that in fact,
	\[ H_1(X) = \left< c\right> \cong \ZZ \]
	which is to say the chains $c$, $2c$, \dots are all not the same in $H_1(X)$,
	but that any other $1$-chain is equivalent to one of these.
	This captures the fact that $X$ is really just $S^1$.
\end{example}
\begin{example}
	[The First Homology Group of the Figure Eight]
	Consider $X_8$ (see \Cref{ex:figure8}).
	Both homology and homotopy see the two loops in $X_8$, call them $a$ and $b$.
	The difference is that in $\pi_1(X_8, x_0)$,
	these two loops are not allowed to commute: we don't have $ab \neq ba$,
	because the group operation in $\pi_1$ is ``concatenate paths''
	But in the homology group $H_1(X)$ the way we add $a$ and $b$
	is to add them formally, to get the $1$-chain $a+b$.
	So \[ H_1(X) \cong \ZZ^{\oplus 2} \quad\text{while}\quad \pi_1(X, x_0) = \left< a,b\right>. \]
\end{example}

\begin{example}
	[The Homology Groups of $S^2$]
	Consider $S^2$, the two-dimensional sphere.
	Since it's path connected, we have $H_0(S^2) = \ZZ$.
	We also have $H_1(S^2) = 0$, for the same reason that $\pi_1(S^2)$ is trivial as well.
	On the other hand we claim that \[ H_2(S^2) \cong \ZZ. \]
	The elements of $H_2(S^2)$ correspond to wrapping $S^2$ in a tetrahedral bag
	(or two bags, or three bags, etc.).
	Thus, the second homology group lets us detect the spherical cavity of $S^2$.
\end{example}
Actually, more generally it turns out that we will have
\[
	H_n(S^m) \cong 
	\begin{cases}
		\ZZ & n=m \text{ or } n=0 \\
		0 & \text{otherwise}.
	\end{cases}
\]

\begin{example}
	[Contractible Spaces]
	Given any contractible space $X$, it turns out that
	\[
		H_n(X)
		\cong
		\begin{cases}
			\ZZ & n = 0 \\
			0 & \text{otherwise}.
		\end{cases}
	\]
	The reason is that, like homotopy groups, it turns out
	that homology groups are homotopy invariant.
	(We'll prove this next section.)
	So the homology groups of contractible $X$ are the same
	as those of a one-point space, which are those above.
\end{example}

\begin{example}
	[Homology Groups of the Torus]
	While we won't be able to prove it for a while, it turns out that
	\[
		H_n(S^1 \times S^1)
		\cong
		\begin{cases}
			\ZZ & n = 0,2 \\
			\ZZ^{\oplus 2} & n = 1 \\
			0 & \text{otherwise}.
		\end{cases}
	\]
	The homology group at $1$ corresponds to our knowledge that $\pi_1(S^1 \times S^1) \cong \ZZ^2$
	and the homology group at $2$ detects the ``cavity'' of the torus.
\end{example}


This is fantastic and all, but how does one go about actually computing any homology groups?
This will be a rather long story, and we'll have to do a significant amount of both algebra and geometry
before we're really able to compute any homology groups.
In what follows, it will often be helpful to keep track of which things are purely algebraic
(work for any chain complex), and which parts are actually stating something which is geometrically true.

\section{The Homology Functor and Chain Complexes}
As I mentioned before, the homology groups are homotopy invariant.
This will be a similar song and dance as the work we did to
create a functor $\pi_1 : \catname{hTop}_\ast \to \catname{Grp}$.
Rather than working slowly and pulling away the curtain to reveal the category theory at the end,
we'll instead start with the category theory right from the start just to save some time.

\begin{definition}
	The category $\catname{hTop}$ is defined as follows:
	\begin{itemize}
		\ii Objects: topological spaces.
		\ii Morphisms: \emph{homotopy classes} of morphisms $X \to Y$.
	\end{itemize}
	In particular, $X$ and $Y$ are isomorphic in $\catname{hTop}$
	if and only if they are homotopic.
\end{definition}
You'll notice this is the same as $\catname{hTop}_\ast$,
except without the basepoints.

\begin{theorem}[Homology is a Functor $\catname{hTop} \to \catname{Grp}$]
	\label{thm:Hn_functor}
	For any particular $n$, $H_n$ is a functor $\catname{hTop} \to \catname{Grp}$.
	In particular,
	\begin{itemize}
		\ii Given any map $f : X \to Y$, we get an induced map $f_\ast : H_n(X) \to H_n(Y)$.
		\ii For two homotopic maps $f, g : X \to Y$, $f_\ast = g_\ast$.
		\ii Two homotopic spaces $X$ and $Y$ have isomorphic homology groups:
		if $f : X \to Y$ is a homotopy then $f_\ast : H_n(X) \to H_n(Y)$ is an isomorphism.
		\ii (Insert your favorite result about functors here.)
	\end{itemize}
\end{theorem}

In order to do this, we have to describe how to take a map $f : X \to Y$
and obtain a map $H_n(f) : H_n(X) \to H_n(Y)$.
Then we have to show that this map doesn't depend on the choice of homotopy.
(This is the analog of the work we did with $f_\sharp$ before.)
It turns out that this timed around, proving this is much more tricky,
and we will have to go back to the chain complex $C_\bullet(X)$ that we built at the beginning.

\subsection*{Algebra of Chain Complexes}
Let's start with the algebra.
First, I'll define the following abstraction of the complex to any sequence of abelian groups.
Actually, though, it works in any category (not just $\catname{AbGrp}$).
The strategy is as follows: we'll define everything that we need completely abstractly,
then show that the geometry concepts we want correspond to this setting.

\begin{definition}
	Let $\AA = \catname{AbGrp}$.
	A \vocab{chain complex} in $\AA$ is a sequence of groups $A_n$ and maps
	\[ \dots \taking{\partial_A} A_n \taking{\partial_A} A_{n-1} \taking{\partial_A} \dots \]
	such that the composition of any two adjacent maps is the zero morphism.
	We we usually denote this by $A_\bullet$.

	The $n$th homology group $H_n(A_\bullet)$ is defined
	as $\ker(A_n \to A_{n-1}) / \img(A_{n+1} \to A_n)$.
	Cycles and boundaries are defined in the same way as before.
\end{definition}
Obviously, this is just a algebraic generalization of the structure we previously looked at,
rid of all its original geometric context.

\begin{definition}
	A \vocab{morphism of chain complexes} $f : A_\bullet \to B_\bullet$ is
	a sequence of maps $f_n$ for every $n$ such that the following diagram commutes:
	\begin{diagram}
		\dots &\rTo^{\partial_A} & A_{n+1} & \rTo^{\partial_A} &
		A_n & \rTo^{\partial_A} & A_{n-1} & \rTo^{\partial_A} & \dots \\
		&& \dTo_{f_{n+1}} && \dTo_{f_n} && \dTo_{f_{n-1}} && \\
		\dots & \rTo^{\partial_B} & B_{n+1} & \rTo^{\partial_B} &
		B_n & \rTo^{\partial_B} & B_{n-1} & \rTo^{\partial_B} & \dots \\
	\end{diagram}
	(Under this definition, the set of chain complexes in $\AA$ is itself an abelian category.)
\end{definition}

Note that given a morphism of chain complexes $f : A_\bullet \to B_\bullet$,
every cycle in $A_n$ gets sent to a cycle in $B_n$, since the following square commutes:
\begin{diagram}
	A_n & \rTo^{\partial_A} & A_{n-1} \\
	\dTo^{f_n} & & \dTo \\
	B_n & \rTo_{\partial_B} & B_{n-1} \\
\end{diagram}
Similarly, every boundary in $A_n$ gets sent to a boundary in $B_n$. Thus,
\begin{moral}
	Every map of $f : A_\bullet \to B_\bullet$ gives a
	map $f_\ast : H_n(A) \to H_n(B)$ for every $n$.
\end{moral}
In fact, each $H_n$ is a functor from chain complexes of $\AA$ to $\AA$ itself.

Next, we want to define what it means for two maps $f$ and $g$ to be homotopic.
Here's the answer:
\begin{definition}
	Let $f, g : A_\bullet \to B_\bullet$.
	Suppose that one can find a map $P_n : A_n \to B_{n+1}$ for every $n$ such that
	\[ g_n - f_n = \partial_B \circ P_n + P_{n-1} \circ \partial_A \]
	Then $P$ is a \vocab{chain homotopy} from $f$ to $g$
	and $f$ and $g$ are \vocab{chain homotopic}.
\end{definition}

We can draw the following picture to illustrate this (warning: the diagonal dotted arrows do NOT commute
with all the other arrows):
\begin{diagram}
	\dots &\rTo^{\partial_A} & A_{n+1} & \rTo^{\partial_A} &
	A_n & \rTo^{\partial_A} & A_{n-1} & \rTo^{\partial_A} & \dots \\
	&& \dTo~{g-f} & \ldDotted~{P_n} & \dTo~{g-f}
	& \ldDotted~{P_{n-1}} & \dTo~{g-f} && \\
	\dots & \rTo^{\partial_B} & B_{n+1} & \rTo^{\partial_B} &
	B_n & \rTo^{\partial_B} & B_{n-1} & \rTo^{\partial_B} & \dots \\
\end{diagram}
The definition is that in each slanted ``parallelogram'', the $g-f$ arrow is the sum of the two
compositions along the sides.

\begin{remark}
	This equation should look terribly unmotivated right now,
	aside from the fact that we are about to show it does the right algebraic thing.
	Its derivation comes from the geometric context that we have deferred
	until the next section, where ``homotopy'' will naturally give ``chain homotopy''.
\end{remark}

Now, the point of this definition is that
\begin{proposition}[Chain homotopic maps induce the same map on homology groups]
	Let $f, g: A_\bullet \to B_\bullet$ be chain homotopic maps $A_\bullet \to B_\bullet$.
	Then the induced maps $f_\ast, g_\ast : H_n(A_\bullet) \to H_n(B_\bullet)$ coincide for each $n$.
\end{proposition}
\begin{proof}
	It's equivalent to show $g-f$ gives the zero map on homology groups,
	In other words, we need to check that every cycle of $A_n$ becomes
	a boundary of $B_n$ under $g-f$.
	\begin{ques}
		Verify that this is true. \qedhere
	\end{ques}
\end{proof}


\subsection*{Geometry of Chain Complexes}
Now let's fill in the geometric details of the picture above.
This will follow from the following two lemmas.
\begin{lemma}[Map of Space $\implies$ Map of Singular Chain Complexes]
	Each $f : X \to Y$ induces a map $C_n(X) \to C_n(Y)$.
\end{lemma}
\begin{proof}
	Take the composition
	\[ \Delta^n \taking{\sigma} X \taking{f} Y. \]
	In other words, a path in $X$ becomes a path in $Y$, et cetera.
	(It's not hard to see that the squares involving $\partial$ commute;
	check it if you like.)
\end{proof}

Now, what we need is to show that if $f , g : X \to Y$ are homotopic,
then they are chain homotopic.
To produce a chain homotopy, we need to take every $n$-simplex $X$
to an $(n+1)$-chain in $Y$, thus defining the map $P_n$.

Let's think about how we might do this. Let's take the $n$-simplex $\sigma : \Delta^n \to X$
and feed it through $f$ and $g$; pictured below is a $1$-simplex $\sigma$ (i.e.\ a path in $X$)
which has been mapped into the space $Y$.
Homotopy means the existence of a map $F : X \times [0,1] \to Y$
such that $F(-,0) = f$ and $F(-,1) = g$, parts of which I've illustrated below with grey arrows
in the image for $Y$.

\begin{center}
	\begin{asy}
		size(14cm);
		bigblob("$Y$");
		pair A = (-3.5,2);
		pair B = (-2.2,-2);
		pair C = (2.2,1.6);
		pair D = (2.0, -1.1);

		pen rr = red;
		dot("$v_0$", A, dir(90), rr); dot("$v_1$", B, dir(-090), rr);
		path v = A..(-2,0)..B;
		draw(v, rr, EndArrow);
		label("$f(\sigma)$", v, dir(180), rr);

		pen hg = heavygreen;
		dot("$w_0$", C, dir(90), hg); dot("$w_1$", D, dir(-90), hg);
		path w = C..(2.3,0)..D; 
		draw(w, hg, EndArrow);
		label("$g(\sigma)$", w, dir(0), hg);

		pen gr = grey + dashed;
		draw(A--C, gr, Margins);
		path F = A--D;
		draw(F, gr, Margins);
		label("$F$", F, dir(90), gr);
		draw(B--D, gr, Margins);

		add(shift(12.5,0)*CC());
		pair W = 1.5*dir(135);
		pair X = 1.5*dir(225);
		pair Y = 1.5*dir(45);
		pair Z = 1.5*dir(-45);
		dot("$v_0$", W, dir(W), rr);
		dot("$v_1$", X, dir(X), rr);
		dot("$w_0$", Y, dir(Y), hg);
		dot("$w_1$", Z, dir(Z), hg);

		label("$\Delta^1 \times [0,1]$", 2*dir(90), dir(90));
		pair A1 = (1.5,0);
		pair A2 = (3.5,0);
		pair A3 = (6.25,0);
		pair A4 = (7.5,0);
		draw(A1--A2, EndArrow);
		draw(A3--A4, EndArrow);
		label("$\boxed{X \times [0,1]}$", midpoint(A2--A3), blue);
		label("$F$", A3--A4, dir(90));
		label("$\sigma \times \operatorname{id}$", A1--A2, dir(90));

		draw(W--X, rr, EndArrow);
		draw(Y--Z, hg, EndArrow);
		draw(W--Y, gr);
		draw(X--Z, gr);
		draw(W--Z, gr);
	\end{asy}
\end{center}

This picture suggests how we might proceed:
we want to create a $2$-chain on $Y$ given the $1$-chains we've drawn.
The homotopy $F$ provides with a ``square'' structure on $Y$,
i.e.\ the square bounded by $v_0$, $v_1$, $w_1$, $w_0$.
We split this up into two triangles; and that's our $2$-chain.

We can make this formal by taking $\Delta^1 \times [0,1]$ (which \emph{is} a square)
and split it into two triangles.
Then, if we apply $\sigma \times \id$, we'll get an $(n+1)$-cell in $X \times [0,1]$,
and then finally applying $F$ will map everything into our space $Y$.
In our example, the final image is the $2$-chain, consisting of two triangles,
which in our picture can be written as $[v_0, v_1, w_0] - [v_0, w_0, w_1]$;
the boundaries are given by the red, green, grey.

More generally, for a $n$-simplex $\phi = [x_0, \dots, x_n]$ we define the so-called \emph{prism operator} $P_n$
as follows. Set $v_i = f(x_i)$ and $w_i = g(x_i)$ for each $i$.
Then, we let
\[ P_n(\phi) \defeq \sum_{i=0}^n (-1)^i (F \circ (\phi\times\id)) \left[ v_0, \dots, v_i, w_i, \dots, w_n \right]. \]
This is just the generalization of the construction above to dimensions $n > 1$,
--- we split $\Delta^n \times [0,1]$ into $n+1$ simplices,
map it into $X$ by $\phi \times \id$ and then push the whole thing into $Y$.
The $(-1)^i$ makes sure that the ``diagonal'' faces all cancel off with each other.

We now claim that for every $\sigma$,
\[ \partial_Y(P_n(\sigma)) = g(\sigma) - f(\sigma) - P_{n-1}(\partial_X\sigma). \]
In the picture, $\partial_Y \circ P_n$ is the boundary of the entire prism
(in the figure, this becomes the red, green, and grey lines, not including diagonal grey,
which is cancelled out).
The $g-f$ is the green minus the red,
and the $P_{n-1} \circ \partial X$ represents the grey edges of the prism
(not including the diagonal line from $v_1$ to $w_0$).
Indeed, one can check (just by writing down several $\sum$ signs)
that the above identity holds.

So that gives the chain homotopy from $f$ to $g$, completing the proof of \Cref{thm:Hn_functor}.

\section{More Examples of Chain Complexes}
We now end this chapter by providing some more examples of chain complexes,
which we'll use in the next chapter to finally compute topological homology groups.

\begin{example}
	[Reduced Homology Groups]
	Suppose $X$ is a (nonempty) topological space.
	One can augment the standard singular complex as follows:
	do the same thing as before, but augment the end by adding a $\ZZ$,
	as shown:
	\[ \dots \to C_1(X) \to C_0(X) \taking{\eps} \ZZ \to 0 \]
	Here $\eps$ is defined by $\eps(\sum n_ip_i) = \sum n_i$ for points $p_i \in X$.
	(Recall that a $0$-chain is just a formal sum of points!)
\end{example}
\begin{definition}
	\label{def:augment}
	The homology groups of the augmented chain complex are called the
	\vocab{reduced homology groups} $\wt H_n(X)$ of the space $X$.

	Obviously $\wt H_n(X) \cong H_n(X)$ for $n > 0$.
	But when $n=0$, the map $H_0(X) \to \ZZ$ by $\eps$ has kernel $\wt H_0(X)$,
	thus $H_0(X) \cong \wt H_0(X) \oplus \ZZ$.
\end{definition}
This is usually just an added convenience.
For example, it means that if $X$ is contractible,
then all its reduced homology groups vanish,
and thus we won't have to keep fussing with the special $n=0$ case.
\begin{ques}
	Given the claim earlier about $H_n(S^m)$, what should $\wt H_n(S^m)$ be?
\end{ques}

\begin{example}
	[Relative Chain Groups]
	Suppose $X$ is a topological space, and $A \subset X$ a subspace.
	We can ``mod out'' by $A$ in the following manner: define
	\[ C_n(X,A) \defeq C_n(X) / C_n(A) \]
	for every $n$. Thus chains contained entirely in $A$ are trivial.

	Then, the usual $\partial$ on $C_n(X)$ generates a new chain complex
	\[ \dots \taking\partial C_{n+1}(X,A) \taking\partial C_n(X,A)
	\taking\partial C_{n-1}(X,A) \taking\partial \dots. \]


		This is well-defined since $\partial$ takes $C_n(A)$ into $C_{n-1}(A)$.
\end{example}
\begin{definition}
	The homology groups of the relative chain complex are the
	\vocab{relative homology groups} and denoted $H_n(X,A)$.
\end{definition}
\todo{can we give a nice example of this?}

One n\"aive guess is that this might equal $H_n(X) / H_n(A)$.
This is not true and in general doesn't even make sense;
if we take $X$ to be $\RR^2$ and $A = S^1$ a circle inside it, we have $H_1(X) = H_1(\RR^2) = 0$
and $H_1(S^1) = \ZZ$.

Another guess is that $H_n(X,A)$ might just be $H_n(X/A)$.
This will turn out to be true in some nice circumstances, which we describe later on.

\begin{example}
	[Mayer-Vietoris Sequence]
	Suppose a space $X$ is covered by two open sets $U$ and $V$.
	We can define $C_n(U+V)$ as follows:
	it consists of chains such that each simplex is either entirely contained in $U$,
	or entirely contained in $V$.
	
	Of course, $\partial$ then defines another chain complex
	\[ \dots \taking\partial C_{n+1}(U+V) \taking\partial C_n(U+V)
	\taking\partial C_{n-1}(U+V) \taking\partial \dots. \]
\end{example}
So once again, we can define homology groups for this complex; we denote them by $H_n(U+V)$.
Miraculously, it will turn out that $H_n(U+V) \cong H_n(X)$.

\section\problemhead

\chapter{The Long Exact Sequence}
In this chapter we introduce the key fact about chain complexes that will allow us to compute
the homology groups of any space: the so-called ``long exact sequence''.

For those that haven't read about abelian categories:
a sequence of morphisms of abelian groups
\[ \dots \to G_{n+1} \to G_n \to G_{n-1} \to \dots \]
is \vocab{exact} if the image of any arrow is equal to the kernel of the next arrow.
In particular,
\begin{itemize}
	\ii The map $0 \to A \to B$ is exact if and only if $A \to B$ is injective.
	\ii the map $A \to B \to 0$ is exact if and only if $A \to B$ is surjective.
\end{itemize}
A short exact sequence is one of the form $0 \to A \injto B \surjto C \to 0$.

\section{Short Exact Sequences and Four Examples}
\prototype{Relative sequence and Mayer-Vietoris sequence.}
Let $\AA = \catname{AbGrp}$.
Recall that we defined a morphism of chain complexes in $\AA$ already.
\begin{definition}
Suppose we have a map of chain complexes
\[ 0 \to A_\bullet \taking f B_\bullet \taking g C_\bullet \to 0 \]
It is said to be \vocab{short exact} if \emph{each row} of the diagram below is short exact.
\begin{diagram}
	&& \vdots && \vdots && \vdots && \\
	&& \dTo^{\partial_A} && \dTo^{\partial_B} && \dTo^{\partial_C} && \\
	0 & \rTo & A_{n+1} & \rInj^{f_{n+1}} & B_{n+1} & \rSurj^{g_{n+1}} & C_{n+1} & \rTo & 0 \\
	&& \dTo^{\partial_A} && \dTo^{\partial_B} && \dTo^{\partial_C} && \\
	0 & \rTo & A_n & \rInj^{f_n} & B_n & \rSurj^{g_n} & C_n & \rTo & 0 \\
	&& \dTo^{\partial_A} && \dTo^{\partial_B} && \dTo^{\partial_C} && \\
	0 & \rTo & A_{n-1} & \rInj^{f_{n-1}} & B_{n-1} & \rSurj^{g_{n-1}} & C_{n-1} & \rTo & 0 \\
	&& \dTo^{\partial_A} && \dTo^{\partial_B} && \dTo^{\partial_C} && \\
	&& \vdots && \vdots && \vdots &&
\end{diagram}
\end{definition}

Here are examples of short exact sequences of chain complexes.
\begin{example}
	[Relative Chain Short Exact Sequence]
	\label{ex:rel_short_exact}
	Since $C_n(X,A) \defeq C_n(X) / C_n(A)$, we have a short exact sequence
	\[ 0 \to C_\bullet(A) \injto C_\bullet(X) \surjto C_\bullet(X,A) \to 0 \]
	for every space $X$ and subspace $A$.
	The maps for each $n$ are the obvious ones:
	$C_n(A) \injto C_n(X)$ inclusion and $C_n(X) \surjto C_n(X,A)$ projection.
\end{example}
\begin{example}
	[Augmented Relative Chain Short Exact Sequence]
	\label{ex:aug_rel_short_exact}
	We can augment adding the following row to the bottom of the diagram:
	\begin{diagram}
		0 & \rTo & C_0(A) & \rInj & C_0(X) & \rSurj & C_0(X,A) & \rTo & 0\\
		&& \dSurj^{\eps} && \dSurj^{\eps} && \dTo && \\
		0 & \rTo & \ZZ & \rTo_\id & \ZZ & \rTo & 0 & \rTo & 0\\
	\end{diagram}
	In other words, this is the short exact sequence
	\[ 0 \to C_\bullet(A) \text{ augmented} \injto C_\bullet(X) \text{ augmented}
	\surjto C_\bullet(X,A) \to 0 \]
	where the augmentation is as described in \Cref{def:augment}.
\end{example}

\begin{example}
	[Mayer-Vietoris Short Exact Sequence and its Augmentation]
	\label{ex:mayer_short_exact}
	Let $X = U \cup V$ be an open cover.
	For each $n$ consider
	\begin{diagram}
		C_n(U \cap V) & \rInj & C_n(U) \oplus C_n(V) & \rSurj & C_n(U + V) \\
		c & \rMapsto & (c, -c) && \\
		&& (c, d) & \rMapsto & c + d
	\end{diagram}
	This generates a short exact sequence
	\[ 0 \to  C_\bullet(U \cap V) \injto C_\bullet(U) \oplus C_\bullet(V)
	\surjto C_\bullet(U + V) \to 0. \]
	Like before, we can \emph{augment} each of the chain complexes in the Mayer-Vietoris
	sequence as well, by appending the following to the bottom of the diagram.
	\begin{diagram}
		0 & \rTo & C_0(U \cap V) & \rInj & C_0(U) \oplus C_0(V) & \rSurj & C_0(U+V) & \rTo & 0\\
		&& \dSurj^{\eps} && \dSurj^{\eps \oplus \eps} && \dTo^\eps && \\
		0 & \rTo & \ZZ & \rTo & \ZZ \oplus \ZZ & \rTo & \ZZ & \rTo & 0
	\end{diagram}
\end{example}

\section{The Long Exact Sequence of Homology Groups}
Consider a short exact sequence $0 \to A_\bullet \taking f B_\bullet \taking g C_\bullet \to 0$.
Now, we know that we get induced maps of homology groups, i.e.\ we have
\begin{diagram}
	\vdots && \vdots && \vdots  \\
	H_{n+1}(A_\bullet) & \rTo^{f_\ast} & H_{n+1}(B_\bullet) & \rTo^{g_\ast} & H_{n+1}(C_\bullet) \\
	H_{n}(A_\bullet) & \rTo^{f_\ast} & H_{n}(B_\bullet) & \rTo^{g_\ast} & H_{n}(C_\bullet) \\
	H_{n}(A_\bullet) & \rTo^{f_\ast} & H_{n}(B_\bullet) & \rTo^{g_\ast} & H_{n}(C_\bullet) \\
	\vdots && \vdots && \vdots \\
\end{diagram}
But the theorem is that we can string these all together,
taking each $H_{n+1}(C_\bullet)$ to $H_n(A_\bullet)$.

\begin{theorem}[Short Exact $\implies$ Long Exact]
	\label{thm:long_exact}
	Let $0 \to A_\bullet \taking f B_\bullet \taking g C_\bullet \to 0$ 
	be \emph{any} short exact sequence of chain complexes we like.
	Then there is an \emph{exact} sequence
	\begin{diagram}
		&& \dots & \rTo & H_{n+2}(C_\bullet) \\
		H_{n+1}(A_\bullet) & \rTo_{f_\ast} &
		H_{n+1}(B_\bullet) & \ldTo(4,1)~\partial \rTo^{g_\ast} & H_{n+1}(C_\bullet) \\
		H_{n}(A_\bullet) & \rTo_{f_\ast} &
		H_{n}(B_\bullet) & \rTo^{g_\ast} \ldTo(4,1)~{\partial} & H_{n}(C_\bullet) \\
		H_{n-1}(A_\bullet) & \rTo_{f_\ast} &
		H_{n-1}(B_\bullet) & \rTo^{g_\ast} \ldTo(4,1)~{\partial} & H_{n-1}(C_\bullet) \\
		H_{n-2}(A_\bullet) & \rTo & \dots & \ldTo(4,1)~\partial & 
	\end{diagram}
	This is called a \vocab{long exact sequence} of homology groups.
\end{theorem}
\begin{proof}
	A very long diagram chase, valid over any abelian category.
	(Alternatively, it's actually possible to use the Snake Lemma twice.)
\end{proof}

\begin{remark}
	The map $\partial : H_n(C_\bullet) \to H_{n-1}(A_\bullet)$ can be written explicitly as follows.
	Recall that $H_n$ is ``cycles modulo boundaries'', and consider the sub-diagram
	\begin{diagram}
	&& B_n & \rSurj^{g_n} & C_n \\
	 && \dTo^{\partial_B} && \dTo_{\partial_C} \\
	A_{n-1} & \rInj^{f_{n-1}} & B_{n-1} & \rSurj_{g_{n-1}} & C_{n-1} \\
	\end{diagram}
	We need to take every cycle in $C_n$ to a cycle in $A_{n-1}$.
	(Then we need to check a ton of ``well-defined'' issues,
	but let's put that aside for now.)

	Suppose $c \in C_n$ is a cycle (so $\partial_C(c) = 0$).
	By surjectivity, there is a $b \in B_n$ with $g_n(b) = c$,
	which maps down to $\partial_B(b)$.
	Now, the image of $\partial_B(b)$ under $g_{n-1}$ is zero by commutativity of the square,
	and so we can pull back under $f_{n-1}$ to get a unique element of $A_{n-1}$
	(by exactness at $B_{n-1}$).

	In summary: we go ``\emph{left, down, left}'' to go from $c$ to $a$:
	\begin{diagram}
		&& b & \rMapsto^{g_n} & \boxed c \\
		&& \dMapsto^{\partial_B} && \dMapsto_{\partial_C} \\
		\boxed a & \rMapsto^{f_{n-1}} & \partial_B(b) & \rMapsto_{g_{n-1}} & 0
	\end{diagram}
\end{remark}
\begin{exercise}
	Check quickly that the recovered $a$ is actually a cycle,
	meaning $\partial_A(a) = 0$.
	(You'll need another row, and the fact that $\partial_B^2 = 0$.)
\end{exercise}

The final word is that:
\begin{moral}
	Short exact sequences of chain complexes give long exact sequences of homology groups.
\end{moral}
In particular, if we take our examples \Cref{ex:rel_short_exact,ex:aug_rel_short_exact,%
ex:mayer_short_exact},
we can just plug them into the theorem. The first two give:
\begin{theorem}[Long Exact Sequence for Relative Homology]
	Let $X$ be a space, and $A \subset X$ a subspace.
	There are long exact sequences
	\[ \dots \to H_n(A) \to H_n(X) \to H_n(X,A) \to H_{n-1}(A) \to \dots. \]
	and
	\[ \dots \to \wt H_n(A) \to \wt H_n(X) \to H_n(X,A) \to \wt H_{n-1}(A) \to \dots. \]
\end{theorem}
The Mayer-Vietoris ones give, for $X = U \cup V$ an open cover,
\[ \dots \to H_n(U \cap V) \to H_n(U) \oplus H_n(V) \to H_n(U+V) \to H_{n-1}(U \cap V) \to \dots. \]
and its reduced version
\[ \dots \to \wt H_n(U \cap V) \to \wt H_n(U) \oplus \wt H_n(V)
\to \wt H_n(U+V) \to \wt H_{n-1}(U \cap V) \to \dots. \]
The exactness of these sequences will give \textbf{tons of information}
about $H_n(X)$ if only we knew something about what $H_n(U+V)$
or $H_n(X,A)$ looked like.  This will be the purpose of the next section.

On the other hand, we can already make headway on $H_n(X,A)$ if we're curious what it looks like.
For example:
\begin{lemma}
	[Relative Homology to Contractible Spaces]
	\label{lem:rel_contractible}
	Let $X$ be a topological space, and let $A$ be a contractible subspace of $X$
	(for example, a single point).
	Then \[ H_n(X, A) \cong \wt H_n(X) \]
	for every $n$.
\end{lemma}
\begin{proof}
	Since $A$ is contractible, we have $\wt H_n(A) = 0$ for every $n$.
	For each $n$ there's a segment of the long exact sequence given by
	\[ \dots \to \underbrace{\wt H_n(A)}_{=0} \to \wt H_n(X) \to H_n(X,A)
	\to \underbrace{\wt H_{n-1}(A)}_{=0} \to \dots. \]
	So since $0 \to \wt H_n(X) \to H_n(X,A) \to 0$ is exact,
	this means $H_n(X,A) \cong \wt H_n(X)$.
\end{proof}


\section{The Mayer-Vietoris Sequence}
\prototype{The computation of $H_n(S^m)$ by splitting $S^m$ into two hemispheres.}

There are two major geometric results.
One is the Excision Theorem, which we defer until later.
The other we present here, which will let us take advantage of the
Mayer-Vietoris sequence.
The proofs are somewhat involved and are thus omitted;
see \cite{ref:hatcher} for details.

The first theorem is that the notation $H_n(U+V)$ that we have kept until now
is redundant, and can be replaced with just $H_n(X)$:
\begin{theorem}[Open Cover Homology Theorem]
	The inclusion $\iota : C_\bullet(U+V) \injto C_\bullet(X)$ 
	induces an isomorphism
	\[ H_n(U+V) \cong H_n(X). \]
\end{theorem}
\begin{remark}
	In fact, this is true for any open cover (even uncountable),
	not just those with two covers $U \cup V$.
	But we only state the special case with two open sets,
	because this is what is needed for \Cref{ex:mayer_short_exact}.
\end{remark}
So, \Cref{ex:mayer_short_exact} together with the above theorem implies,
after replacing all the $H_n(U+V)$'s with $H_n(X)$'s:
\begin{theorem}[Long Exact Sequence for Mayer-Vietoris]
	If $X = U \cup V$ is an open cover, then we have long exact sequences
	\[ \dots \to H_n(U \cap V) \to H_n(U) \oplus H_n(V)
		\to H_n(X) \to H_{n-1}(U \cap V) \to \dots. \]
	and
	\[ \dots \to \wt H_n(U \cap V) \to \wt H_n(U) \oplus \wt H_n(V) \to
		\wt H_n(X) \to \wt H_{n-1}(U \cap V) \to \dots. \]
\end{theorem}

At long last, we can compute the homology groups of the spheres.
The theorem is that
\begin{theorem}[The Homology Groups of $S^m$]
	\label{thm:reduced_homology_sphere}
	For integers $m$ and $n$,
	\[ \wt H_n(S^m) \cong
	\begin{cases}
		\ZZ & n=m \\
		0 & \text{otherwise}.
	\end{cases}
	\]
\end{theorem}
\begin{proof}
	This one's fun, so I'll only spoil the case $m=1$, and leave the rest to you.
	Decompose the circle $S^1$ into two arcs $U$ and $V$, as shown:
	\begin{center}
		\begin{asy}
			size(4cm);
			draw(unitcircle);
			label("$S^1$", dir(45), dir(45));
			real R = 0.1;
			draw(arc(origin,1-R,-100,100), blue+1);
			label("$U$", (1-R)*dir(0), dir(180), blue);
			draw(arc(origin,1+R,80,280), red+1);
			label("$V$", (1+R)*dir(180), dir(180), red);
		\end{asy}
	\end{center}
	Each of $U$ and $V$ is contractible, so all their reduced homology groups vanish.
	Moreover, $U \cap V$ is homotopy equivalent to two points,
	hence 
	\[ \wt H_n(U \cap V) \cong
		\begin{cases}
			\ZZ & n = 0 \\
			0 & \text{otherwise}.
		\end{cases}
	\]
	Now consider again the segment of the short exact sequence
	\[ 
		\dots \to
		\underbrace{\wt H_n(U) \oplus \wt H_n(V)}_{= 0} \to
		\wt H_n(S^1) \to \wt H_{n-1}(U \cap V) \to
		\underbrace{\wt H_{n-1}(U) \oplus \wt H_{n-1}(V)}_{=0} \to \dots.
	\]
	From this we derive that $\wt H_n(S^1)$ is $\ZZ$ for $n=1$ and $0$ elsewhere.
\end{proof}

Here are some more examples.
\begin{proposition}[The Homology Groups of the Figure Eight]
	Let $X = S^1 \wedge S^1$ be the figure eight.
	Then
	\[
		\wt H_n(X) \cong
		\begin{cases}
			\ZZ^{\oplus 2} & n = 1 \\
			0 & \text{otherwise}.
		\end{cases}
	\]
\end{proposition}
\begin{proof}
	Again, for simplicity we work with reduced homology groups.
	Let $U$ be the ``left'' half of the figure eight plus a little bit of the right,
	as shown below.
	\begin{center}
		\begin{asy}
			size(4cm);
			draw(unitcircle);
			draw(CR(2*dir(180),1), blue+2);
			draw(arc(origin,1,135,225), blue+2);
			label("$U$", 2*dir(180)+dir(135), dir(135), blue);
			label("$S^1 \wedge S^1$", dir(15), dir(15));
		\end{asy}
	\end{center}
	The set $V$ is defined symmetrically.
	In this case $U \cap V$ is contractible, while each of $U$ and $V$
	is homotopic to $S^1$.

	Thus, we can read a segment of the long exact sequence as
	\[
		\dots \to
		\underbrace{\wt H_n(U \cap V)}_{=0}
		\to \wt H_n(U) \oplus \wt H_n(V) \to \wt H_n(X) \to 
		\underbrace{\wt H_{n-1}(U \cap V)}_{=0} \to \dots.
	\]
	So we get that $\wt H_n(X) \cong \wt H_n(S^1) \oplus \wt H_n(S^1)$,
\end{proof}

Up until now, we have been very fortunate that we have always been able to make
certain parts of the space contractible.
This is not always the case, and in the next example we will have to
actually understand the maps in question to complete the solution.

\begin{proposition}
	[Homology Groups of the Torus]
	Let $X = S^1 \times S^1$ be the torus.
	Then
	\[
		\wt H_n(X)
		=
		\begin{cases}
			\ZZ^{\oplus 2} & n = 1 \\
			\ZZ & n = 2 \\
			0 & \text{otherwise}.
		\end{cases}
	\]
\end{proposition}
\begin{proof}
	To make our diagram look good on 2D paper,
	we'll represent the torus as a square with its edges identified,
	though three-dimensionally the picture makes sense as well.
	Consider $U$ (shaded light orange) and $V$ (shaded green) as shown.
	(Note that $V$ is connected due to the identification of the left and right (blue) edges,
	even if it doesn't look like it in the picture).
	\begin{center}
		\begin{asy}
			pair A = (0,0);
			pair B = (1,0);
			pair C = (1,1);
			pair D = (0,1);
			draw(A--B, red+1.5, MidArrow);
			draw(B--C, blue+1.5, MidArrow);
			draw(D--C, red+1.5, MidArrow);
			draw(A--D, blue+1.5, MidArrow);
			fill(box((0.2,0),(0.8,1)), orange+opacity(0.2));
			fill(box(A,(0.3,1)), heavygreen+opacity(0.2));
			fill(box((0.7,0),C), heavygreen+opacity(0.2));
			draw( (0.3,0)--(0.3,1), heavygreen+dashed+1.2);
			draw( (0.7,0)--(0.7,1), heavygreen+dashed+1.2);
			draw( (0.2,0)--(0.2,1), orange+dashed+1.2);
			draw( (0.8,0)--(0.8,1), orange+dashed+1.2);

			label("$U$", (0.5, 0.5));
			label("$V$", (0.1, 0.8));
			label("$V$", (0.9, 0.8));
		\end{asy}
	\end{center}
	In the three dimensional picture, $U$ and $V$ are two cylinders which together give the torus.
	This time, $U$ and $V$ are each homotopic to $S^1$, and the intersection $U \cap V$
	is the disjoint union of two circles: thus $\wt H_1(U \cap V) \cong \ZZ \oplus \ZZ$,
	and $H_0(U \cap V) \cong \ZZ^{\oplus 2} \implies \wt H_0(U \cap V) \cong \ZZ$.

	For $n \ge 3$, we have
	\[ 
		\dots \to
		\underbrace{\wt H_n(U \cap V)}_{=0}
		\to \wt H_n(U) \oplus \wt H_n(V) \to \wt H_n(X) \to 
		\underbrace{\wt H_{n-1}(U \cap V)}_{=0} \to \dots.
	\]
	and so $H_n(X) \cong 0$ for $n \ge 0$.
	Also, we have $H_0(X) \cong \ZZ$ since $X$ is path-connected.
	So it remains to compute $H_2(X)$ and $H_1(X)$.

	Let's find $H_2(X)$ first.
	We first consider the segment
	\[ 
		\dots \to
		\underbrace{\wt H_2(U) \oplus \wt H_2(V)}_{=0} \to \wt H_2(X) \xhookrightarrow{\delta}
		\underbrace{\wt H_1(U \cap V)}_{\cong \ZZ \oplus \ZZ} \xrightarrow{\phi}
		\underbrace{\wt H_1(U) \oplus \wt H_1(V)}_{\cong \ZZ \oplus \ZZ} \to \dots
	\]
	Unfortunately, this time it's not immediately clear what $\wt H_2(X)$ because
	we only have one zero at the left.
	In order to do this, we have to actually figure out what the maps $\delta$ and $\phi$ look like.
	Note that, as we'll see, $\phi$ isn't an isomorphism even though the groups are isomorphic.

	The presence of the zero term has allowed us to make the connecting map $\delta$ injective.
	First, $\wt H_2(X)$ is isomorphic to the image of of $\delta$, which is
	exactly the kernel of the arrow $\phi$ inserted.
	To figure out what $\ker \phi$ is, we have to think back to how the map
	$C_\bullet(U \cap V) \to C_\bullet(U) \oplus C_\bullet(V)$ was constructed:
	it was $c \mapsto (c, -c)$.
	So the induced maps of homology groups is actually what you would guess:
	a $1$-cycle $z$ in $\wt H_1(U \cap V)$ gets sent $(z, -z)$ in $\wt H_1(U) \oplus \wt H_1(V)$.

	In particular, consider the two generators $z_1$ and $z_2$ of
	$\wt H_1(U \cap V) = \ZZ \oplus \ZZ$,
	i.e.\ one cycle in each connected component of $U \cap V$.
	(To clarify: $U \cap V$ consists of two ``wristbands'';
	$z_i$ wraps around the $i$th one once.)
	Moreover, let $\alpha_U$ denote a generator of $\wt H_1(U) \cong \ZZ$,
	and $\alpha_V$ a generator of $H_2(U) \cong \ZZ$.
	Then we have that
	\[ z_1 \mapsto (\alpha_U, -\alpha_V) \qquad\text{and}\qquad z_2 \mapsto (\alpha_U, -\alpha_V). \]
	(The signs may differ on which direction you pick for the generators;
	note that $\ZZ$ has two possible generators.)
	We can even format this as a matrix:
	\[ \phi = \begin{pmatrix} 1 & 1 \\ -1 & -1 \end{pmatrix}. \]
	And we observe $\phi(z_1 - z_2) = 0$, meaning this map has nontrivial kernel!
	That is, \[ \ker\phi = \left< z_1 - z_2 \right> \cong \ZZ. \]
	Thus, $\wt H_2(X) \cong \img \delta \cong \ker \phi \cong \ZZ$.
	We'll also note that $\img \phi$ is the set generated by $(\alpha_U, -\alpha_V)$;
	(in particular $\img\phi \cong \ZZ$ and the quotient by $\img\phi$ is $\ZZ$ too).

	The situation is similar with $\wt H_1(X)$: this time, we have
	\[ 
		\dots 
		%\to \underbrace{\wt H_1(U \cap V)}_{\cong \ZZ \oplus \ZZ}
		\xrightarrow{\phi} \underbrace{\wt H_1(U) \oplus \wt H_1(V)}_{\cong \ZZ \oplus \ZZ}
		\overset{\psi}{\to} \wt H_1(X) \overset\partial\surjto
		\underbrace{\wt H_0(U \cap V)}_{\cong \ZZ} 
		\to \underbrace{\wt H_0(U) \oplus \wt H_0(V)}_{=0} \to \dots
	\]
	and so we know that the connecting map $\partial$ is surjective,
	hence $\img \partial \cong \ZZ$.
	Now, we also have
	\begin{align*}
		\ker \partial \cong \img \psi &\cong \left( \wt H_1(U) \oplus \wt H_1(V) \right) / \ker \psi \\
		&\cong \left( \wt H_1(U) \oplus \wt H_1(V) \right) / \img \phi \\
		&\cong \ZZ
	\end{align*}
	by what we knew about $\img \phi$ already.
	To finish off we need some algebraic tricks. The first is \Cref{prob:break_exact},
	which gives us a short exact sequence
	\[
		0 \to \underbrace{\ker\partial}_{\cong \img\psi \cong \ZZ} 
		\injto \wt H_1(X)
		\surjto \underbrace{\img\partial}_{\cong \ZZ} \to 0.
	\]
	You should satisfy yourself that $\wt H_1(X) \cong \ZZ \oplus \ZZ$ is the
	only possibility, but we'll prove this rigorously with \Cref{lem:split_exact}.
\end{proof}

Note that the previous example is of a different attitude than the previous ones,
because we had to figure out what the maps in the long exact sequence actually were.
In principle you could do this for the previous two examples as well,
by making explicit what all the arrows are.
You can do this even for the connecting arrow, because the ``left, down, left'' procedure
used in the proof of \Cref{thm:long_exact} gives us a concrete description of the arrow.

Finally, to fully justify the last step, we present the following lemma.
\begin{lemma}[Splitting Lemma]
	\label{lem:split_exact}
	For a short exact sequence $0 \to A \taking f B \taking g C \to 0$
	of abelian groups, the following are equivalent:
	\begin{enumerate}[(a)]
		\ii There exists $p : B \to A$ such that $A \taking f B \taking p A$ is the identity.
		\ii There exists $s : C \to B$ such that $C \taking s B \taking g C$ is the identity.
		(Note that this is true whenever $B$ is free!)
		\ii There is an isomorphism from $B$ to $A \oplus C$ such that the diagram
		\begin{diagram}
			&&& & B & &&&  \\
			0 & \rTo & A & \ruInj(2,1)^f & \dIsom^\cong & \rdSurj(2,1)^g & C & \rTo & 0 \\
			&&& \rdInj(2,1) & A \oplus C & \ruSurj(2,1) &&& 
		\end{diagram}
		commutes. (The maps attached to $A \oplus C$ are the obvious ones.)
	\end{enumerate}
	In these cases we say the short exact sequence \vocab{splits}.
\end{lemma}
In particular, for $C = \ZZ$, or any free abelian group,
condition (b) is necessarily true.
So, once we obtained the short exact sequence $0 \to \ZZ \to \wt H_1(X) \to \ZZ \to 0$,
we were done.

\begin{remark}
	An example of a short exact sequence which doesn't split is
	\[ 0 \to \Zc 2 \xhookrightarrow{\times 2} \Zc 4 \surjto \Zc 2 \to 0 \]
	since it is not true that $\Zc 4 \cong \Zc2 \oplus \Zc 2$.
\end{remark}
\begin{remark}
	The splitting lemma is true in any abelian category.
	The ``direct sum'' is the colimit of the two objects $A$ and $C$.
\end{remark}

\section\problemhead

\begin{problem}
	Complete the proof of \Cref{thm:reduced_homology_sphere},
	i.e.\ compute $H_n(S^m)$ for all $m$ and $n$.
	(Try doing $m=2$ first, and you'll see how to proceed.)
	\begin{hint}
		Induction on $m$, using hemispheres.
	\end{hint}
\end{problem}

\begin{problem}
	Compute the reduced homology groups of $\RR^n$ with $p \ge 1$ points removed.
	\begin{hint}
		One strategy is induction on $p$, with base case $p=1$.
		Another strategy is to let $U$ be the desired space and let $V$
		be the union of $p$ non intersecting balls.
	\end{hint}
	\begin{sol}
		The answer is $\wt H_{n-1}(X) \cong \ZZ^{\oplus p}$,
		with all other groups vanishing.
		For $p=1$, $\RR^n - \{\ast\} \cong S^{n-1}$ so we're done.
		For all other $p$, draw a hyperplane dividing the $p$ points into two halves
		with $a$ points on one side and $b$ points on the other (so $a+b=p$).
		Set $U$ and $V$ and use induction.

		Alternatively, let $U$ be the desired space and let $V$
		be the union of $p$ disjoint balls, one around every point.
		Then $U \cup V = \RR^n$ has all reduced homology groups trivial.
		From the Mayer-Vietoris sequence we can read $\wt H_k(U \cap V) \cong \wt H_k(U) \cap \wt H_k(V)$.
		Then $U \cap V$ is $p$ punctured balls, which are each the same as $S^{n-1}$.
		One can read the conclusion from here.
	\end{sol}
\end{problem}

\begin{dproblem}[Klein Bottle]
	\gim
	Show that the reduced homology groups of the Klein bottle are given by
	\[
		\wt H_n(X) = 
		\begin{cases}
			\ZZ \oplus \Zc 2 & n = 1 \\
			0 & \text{otherwise}.
		\end{cases}
	\]
	\begin{hint}
		It's possible to use two cylinders with $U$ and $V$.
		This time the matrix is $\begin{pmatrix} 1 & 1 \\ 1 & -1 \end{pmatrix}$
		or some variant though; in particular, it's injective, so $\wt H_2(X) = 0$.
	\end{hint}
\end{dproblem}


\todo{add to artwork gallery}


\chapter{More on Computing Homology Groups}
\chapter{The Cohomology Ring}
\end{document}
