\documentclass[11pt]{scrreprt}
\input{../../tex/preamble}
\def\asydir{}

\renewcommand\gim{}
\renewcommand\yod{}
\renewcommand\kurumi{}
\renewenvironment{hint}{\begin{gobble}}{\end{gobble}}
\renewenvironment{sol}{\begin{gobble}}{\end{gobble}}

\begin{document}
\title{Categories}
\maketitle

% TODO: remember to update master file with new chapters
\chapter{Objects and Morphisms}
I can't possibly hope to do category theory any justice in these few chapters;
thus I'll just give a very high-level overview of how many of the concepts we've
encountered so far can be re-cast into categorical terms.
So I'll say what a category is, give some examples,
then talk about a few things that categories can do.
For my examples, I'll be drawing from all the previous chapters;
feel free to skip over the examples corresponding to things you haven't seen.

If you're interested in category theory (like I was!), perhaps in
what surprising results are true for general categories, I strongly recommend \cite{ref:msci}.

\section{Motivation: Isomorphisms}
From earlier chapters let's recall the definition of an \emph{isomorphism} of two objects.
We had that
\begin{itemize}
	\ii Two groups $G$ and $H$ were isomorphic if there was a bijective homomorphism:
	equivalently, we wanted homomorphisms $\phi : G \to H$ and $\psi : H \to G$
	which were mutual inverses, meaning $\phi \circ \psi = \id_H$ and $\psi \circ \phi = \id_G$.
	\ii Two metric (or topological) spaces $X$ and $Y$ are isomorphic
	if there is a continuous bijection $f : X \to Y$ such that $f\inv$ is also continuous.
	\ii Two vector spaces $V$ and $W$ are isomorphic if there is a bijection $T : V \to W$
	which is a linear map.
	Again, this can be re-cast as saying that $T$ and $T\inv$ are continuous maps.
	\ii Two rings $R$ and $S$ are isomorphic if there is a bijective ring homomorphism $\phi$;
	again, we can recast this as two mutually inverse ring homomorphisms.
\end{itemize}

In each case we have some collections of objects and some maps,
and the isomorphisms can be viewed as just maps.
Let's use this to motivate the definition of a general \emph{category}.

\section{Categories, and Examples Thereof}
\prototype{$\catname{Grp}$ is possibly the most natural example.}
\begin{definition}
	A \vocab{category} $\AA$ consists of the following.
	\begin{itemize}
		\ii A class of \vocab{objects}, denoted $\obj(\AA)$.
		\ii For any two objects $A_1, A_2 \in \obj(\AA)$, 
		a class of \vocab{arrows} (also called \vocab{morphisms} or \vocab{maps}) between them.
		We'll denote the set of these arrows by $\Hom_\AA(A_1, A_2)$.
		\ii For any $A_1, A_2, A_3 \in \obj(\AA)$,
		if $f : A_1 \to A_2$ is an arrow and $g : A_2 \to A_3$ is an arrow, we can compose
		these arrows to get an arrow $g \circ f : A_1 \to A_3$.

		We can represent this in a \vocab{commutative diagram}
		\begin{diagram}
			A_1 & \rTo^f & A_2 \\
			& \rdDashed^h & \dTo_g \\
			&& A_3
		\end{diagram}
		where $h = g \circ f$.
		The composition operation $\circ$ is part of the data of $\AA$;
		it must be associative.
		In the diagram above we say that $h$ \vocab{factors} through $A_2$.
		
		\ii Finally, every object $A \in \obj(\AA)$ has a special \vocab{identity arrow} $\id_A$;
		you can guess what it does.\footnote{To be painfully explicit: if $f : A' \to A$ is an arrow then $\id_A \circ f = f$;
		similarly, if $g : A \to A'$ is an arrow then $g \circ \id_A = g$.}
	\end{itemize}
\end{definition}
\begin{remark}
	You can think of ``class'' as just ``set''.
	The reason we can't use the word ``set'' is because of some paradoxical issues with
	collections which are too large;
	Cantor's Paradox says there is no set of all sets.
	So referring to these by ``class'' is a way of sidestepping this issues.
\end{remark}
\begin{abuse}
	From now on, by $A \in \AA$ we'll mean $A \in \obj(\AA)$.
\end{abuse}

Let's formalize the motivation we began with.
\begin{example}
	[Basic Examples of Categories]
	\listhack
	\label{example:basic_categories}
	\begin{enumerate}[(a)]
		\ii There is a category of groups $\catname{Grp}$. The data is
		\begin{itemize}
			\ii The objects of $\catname{Grp}$ are the groups.
			\ii The arrows of $\catname{Grp}$ are the homomorphisms between these groups.
			\ii The composition $\circ$ in $\catname{Grp}$ is function composition.
		\end{itemize}
		\ii In the same way we can conceive a category $\catname{Ring}$ of rings.
		\ii Similarly, there is a category $\catname{Top}$ of topological spaces,
		whose arrows are the continuous maps.
		\ii There is a category $\catname{Top}_\ast$ of topological spaces with a \emph{distinguished basepoint};
		that is, a pair $(X, x_0)$ where $x_0 \in X$.
		Arrows are continuous maps $f : X \to Y$ with $f(x_0) = y_0$.
		\ii Similarly, there is a category $\catname{Vect}_k$ of
		vector spaces (possibly infinite-dimensional) over a field $k$,
		whose arrows are the linear maps.
		There is even a category $\catname{FDVect}_k$ of
		\emph{finite-dimensional} vector spaces.
		\ii We have a category $\catname{Set}$ of sets,
		where the arrows are \emph{any} maps.
	\end{enumerate}
\end{example}
And of course, we can now define what an isomorphism is!
\begin{definition}
	An arrow $A_1 \taking{f} A_2$ is an \vocab{isomorphism}
	if there exists $A_2 \taking{g} A_1$ such that $f \circ g = \id_{A_1}$
	and $g \circ f = \id_{A_2}$.
	In that case we say $A_1$ and $A_2$ are \vocab{isomorphic}, hence $A_1 \cong A_2$.
\end{definition}
\begin{remark}
	Note that in $\catname{Set}$, $X \cong Y
	\iff \left\lvert X \right\rvert = \left\lvert Y \right\rvert$.
\end{remark}
\begin{ques}
	Check that every object in a category is isomorphic to itself.
	(This is offensively easy.)
\end{ques}
More importantly, this definition should strike you as a little impressive.
We're able to define whether two groups (rings, spaces, etc.) are isomorphic
solely by the functions between the objects.
Indeed, one of the key themes in category theory (and even algebra) is that
\begin{moral}
	One can learn about objects by the functions betweens them.
	Category theory takes this to the extreme by \emph{only} looking at arrows,
	and ignoring what the objects themselves are.
\end{moral}

But there are some trickier interesting examples of categories.
\begin{example}
	[Posets are Categories]
	Let $\mathcal P$ be a partially ordered set.
	We can construct a category $P$ for it as follows:
	\begin{itemize}
		\ii The objects of $P$ are going to be the elements of $\mathcal P$.
		\ii The arrows of $P$ are defined as follows:
		\begin{itemize}
			\ii For every object $p \in P$, we add an identity arrow $\id_p$, and
			\ii For any pair of distinct objects $p \le q$, we add a single arrow $p \to q$.
		\end{itemize}
		There are no other arrows.
		\ii There's only one way to do the composition. What is it?
	\end{itemize}
\end{example}
For example, for the poset $\mathcal P$ on four objects $\{a,b,c,d\}$ with $a \le b$ and $a \le c \le d$, we get:
\begin{center}
\begin{tikzpicture}[scale=3.5]
	\SetVertexMath
	\Vertices{square}{d,c,a,b}
	\Edge[style={->}, label={$a \le b$}](a)(b)
	\Edge[style={->}, label={$a \le c$}](a)(c)
	\Edge[style={->}, label={$a \le d$}](a)(d)
	\Edge[style={->}, label={$c \le d$}](c)(d)
	\Loop[dist=8, dir=NO, label={$\id_a$}, labelstyle={above=1pt}](a)
	\Loop[dist=8, dir=WE, label={$\id_b$}, labelstyle={left=1pt}](b)
	\Loop[dist=8, dir=EA, label={$\id_c$}, labelstyle={right=1pt}](c)
	\Loop[dist=8, dir=WE, label={$\id_d$}, labelstyle={left=1pt}](d)
\end{tikzpicture}
\end{center}

This illustrates the point that
\begin{moral}
	The arrows of a category can be totally different from functions.
\end{moral}
In fact, in a way that can be made precise, the term ``concrete category'' refers
to one where the arrows really are ``structure-preserving maps between sets'',
like $\catname{Grp}$, $\catname{Top}$, or $\catname{Ring}$.

\begin{ques}
	Check that no two distinct objects of a poset are isomorphic.
\end{ques}

Here's a second quite important example of a non-concrete category.
\begin{example}
	[Important: Groups Are One-Object Categories]
	A group $G$ can be interpreted as a category $\mathcal G$ with one object $\ast$,
	all of whose arrows are isomorphisms.

	\begin{center}
	\begin{tikzpicture}[scale=5.5]
		\Vertex[x=0,y=0,L={$\ast$}]{a}
		\Loop[dist=8, dir=NO, label={$1 = \id_a$}, labelstyle={above=1pt}](a)
		\Loop[dist=7, dir=WE, label={$g_2$}, labelstyle={left=1pt}](a)
		\Loop[dist=9, dir=SO, label={$g_3$}, labelstyle={below=1pt}](a)
		\Loop[dist=8, dir=EA, label={$g_4$}, labelstyle={right=1pt}](a)
	\end{tikzpicture}
	\end{center}

	As \cite{ref:msci} says:

	\begin{quote}
	The first time you meet the idea that a group is a kind of category,
	it's tempting to dismiss it as a coincidence or a trick.
	It's not: there's real content.
	To see this, suppose your education had been shuffled and you took a course
	on category theory before ever learning what a group was.
	Someone comes to you and says: 

	``There are these structures called `groups', and the idea is this:
	a group is what you get when you collect together all the symmetries
	of a given thing.''

	``What do you mean by a `symmetry'?'' you ask.

	``Well, a symmetry of an object $X$ is a way of transforming $X$ or mapping
	$X$ into itself, in an invertible way.''

	``Oh,'' you reply, ``that's a special case of an idea I've met before.
	A category is the structure formed by \emph{lots} of objects and mappings
	between them -- not necessarily invertible. A group's just the very special case
	where you've only got one object, and all the maps happen to be invertible.''
	\end{quote}
\end{example}

\begin{exercise}
	Verify the above!
	That is, show that the data of a one-object category with all isomorphisms
	is the same of the data of a group.
\end{exercise}

Finally, here are some examples of categories you can make from other categories.
\begin{example}
	[Deriving Categories]
	\listhack
	\begin{enumerate}[(a)]
		\ii Given a category $\AA$, we can construct the \vocab{opposite category}
		$\AA^{\text{op}}$, which is the same as $\AA$ but with all arrows reversed.
		\ii Given a category $\AA$ and $\BB$, we can construct the \vocab{product category} $\AA \times \BB$
		as follows: the objects are pairs $(A, B)$ for $A \in \AA$ and $B \in \BB$,
		and the arrows from $(A_1, B_1)$ to $(A_2, B_2)$
		are pairs \[ \left( A_1 \taking{f} A_2, B_1 \taking{g} B_2 \right). \]
		What do you think the composition and identities are?
	\end{enumerate}
\end{example}

\section{Special Objects in Categories}
\prototype{$\catname{Set}$ has initial object $\varnothing$ and final object $\{\ast\}$. An element of $S$ corresponds to a map $\{\ast\} \to S$.}
Certain objects in categories have special properties.
Here are a couple examples.
\begin{example}
	[Initial Object]
	An \vocab{initial object} of $\AA$ is an object
	$A_{\text{init}} \in \AA$ such that for any $A \in \AA$ (possibly $A = A_{\text{init}}$),
	there is exactly one arrow from $A_{\text{init}}$ to $A$.
	For example,
	\begin{enumerate}[(a)]
		\ii The initial object of $\catname{Set}$ is the empty set $\varnothing$.
		\ii The initial object of $\catname{Grp}$ is the trivial group $\{1\}$.
		\ii The initial object of $\catname{Ring}$ is the ring $\ZZ$
		(recall that ring homomorphisms $R \to S$ map $1_R$ to $1_S$).
		\ii The initial object of $\catname{Top}$ is the empty space.
		\ii The initial object of a partially ordered set is its smallest element, if one exists.
	\end{enumerate}
\end{example}

We justify the use of ``the'' by \Cref{prob:initial_object}:
we'll show later that any two initial objects are isomorphic.
In fact, you should probably do that problem now.
\begin{remark}
	In mathematics, we really never know nor care if two objects are actually equal
	or whether they are isomorphic.
	For example, there are many competing ways to define $\RR$,
	but we still just refer to it as ``the'' real numbers.

	Thus when we define categorical notions, we would like to check they are
	unique up to isomorphism.
	This is really clean in the language of categories, and definitions
	often cause objects to be unique up to isomorphism for elegant reasons like the above.
\end{remark}

One can take the ``dual'' notion, a terminal object.
\begin{example}
	[Terminal Object]
	An \vocab{terminal object} of $\AA$ is an object
	$A_{\text{final}} \in \AA$ such that for any $A \in \AA$ (possibly $A = A_{\text{final}}$),
	there is exactly one arrow from $A$ to $A_{\text{final}}$.
	For example,
	\begin{enumerate}[(a)]
		\ii The terminal object of $\catname{Set}$ is the singleton set $\{\ast\}$.
		(There are many singleton sets, of course, but \emph{as sets} they are all isomorphic!)
		\ii The terminal object of $\catname{Grp}$ is the trivial group $\{1\}$.
		\ii The terminal object of $\catname{Ring}$ is the zero ring (a ring with element $0=1$).
		(recall that ring homomorphisms $R \to S$ map $1_R$ to $1_S$).
		\ii The terminal object of $\catname{Top}$ is the single-point space.
		\ii The terminal object of a partially ordered set is its maximal element, if one exists.
	\end{enumerate}
\end{example}

Again, terminal objects are unique up to isomorphism.
The reader is invited to repeat the proof from the preceding exercise here.
However, we can illustrate more strongly the notion of duality to give a short proof.
\begin{ques}
	Verify that terminal objects of $\AA$ are equivalent to initial objects of $\AA^{\text{op}}$.
	Thus terminal objects of $\AA$ are unique up to isomorphism.
\end{ques}
In general, one can consider in this way the dual of \emph{any} categorical notion:
properties of $\AA$ can all be translated to dual properties of $\AA^{\text{op}}$
(often by adding the word ``co'' in front).

One last neat construction: suppose we're working in a concrete category,
meaning (loosely) that the objects are ``sets with additional structure''.
Now suppose you're sick of maps and just want to think about elements of these sets.
Well, I won't let you do that since you're reading a category theory chapter,
but I will offer you the following advice:
\begin{itemize}
	\ii In $\catname{Set}$, arrows from $\{\ast\}$ to $S$ correspond to elements of $S$.
	\ii In $\catname{Top}$, arrows from $\{\ast\}$ to $X$ correspond to points of $X$.
	\ii In $\catname{Grp}$, arrows from $\ZZ$ to $G$ correspond to elements of $G$.
	\ii In $\catname{Ring}$, arrows from $\ZZ[x]$ to $R$ correspond to elements of $R$.
\end{itemize}
and so on.
So in most concrete categories, you can think of elements as functions from special sets to the set in question.
In each of these cases we call the object in question a \vocab{free object}.

\section{Binary Products}
\prototype{$X \times Y$ in most concrete categories is the set-theoretic product.}
The ``universal property'' is a way of describing objects in terms of maps
in such a way that it defines the object up to unique isomorphism
(much the same as the initial and terminal objects).

To show how this works in general, let me give a concrete example.
Suppose I'm in a category -- let's say $\catname{Set}$ for now.
I have two sets $X$ and $Y$, and I want to construct the Cartesian product $X \times Y$ as we know it.
The philosophy of category theory dictates that I should talk about maps only,
and avoid referring to anything about the sets themselves.
How might I do this?

Well, let's think about maps into $X \times Y$.
The key observation is that 
\begin{moral}
A function $A \taking f X \times Y$
amounts to a pair of functions $(A \taking g X, A \taking h Y)$.
\end{moral}
Put another way, there is a natural projection map $X \times Y \surjto X$ and $X \times Y \surjto Y$.
Picture:
\begin{diagram}
	&& X \\
	X \times Y & \ruSurj(2,1)^{\pi_X} & \\
	& \rdSurj(2,1)_{\pi_Y} & Y
\end{diagram}
(We have to do this in terms of projection maps rather than elements,
because category theory forces us to talk about arrows.)
Now how do I add $A$ to this diagram?
The point is that there is a bijection between functions $A \taking f X \times Y$
and pairs $(g,h)$ of functions.
Thus for every pair $A \taking g X$ and $A \taking h Y$ there is a \emph{unique} function
$A \taking f X \times Y$. Picture:

But $X \times Y$ is special in that it is ``universal'':
for any \emph{other} set $A$, if you give me a function $A \to X$ and $A \to Y$, I can use it
build a \emph{unique} function $A \to X \times Y$.
\begin{diagram}
	&& && X \\
	A & \rDotted~{\exists! f} & X \times Y & \ruTo(4,1)^g \ruSurj(2,1)_{\pi_X} & \\
	& \rdTo(4,1)_h && \rdProj(2,1)^{\pi_Y} & Y
\end{diagram}
We can do this in any general category, defining a so-called product.
\begin{definition}
	Let $X$ and $Y$ be objects in any category $\AA$.
	The \vocab{product} consists of an object $X \times Y$ and projection maps $\pi_X$, $\pi_Y$
	for any object $A$ and maps $A \taking g X$, $A \taking h Y$, there
	is a \emph{unique} function $A \taking f X \times Y$ such that the diagram
	\begin{diagram}
		&& && X \\
		A & \rDotted~{\exists! f} & X \times Y & \ruTo(4,1)^g \ruProj(2,1)_{\pi_X} & \\
		& \rdTo(4,1)_h && \rdProj(2,1)^{\pi_Y} & Y
	\end{diagram}
	commutes.
	In other words, if $A \taking g X$ and $A \taking h Y$,
	then each of $g$ and $h$ \emph{factors uniquely} through $X \times Y$.
\end{definition}
\begin{abuse}
	Strictly speaking, the product should consist of \emph{both} the object $X \times Y$
	and the projection maps $\pi_X$ and $\pi_Y$.
	However, if $\pi_X$ and $\pi_Y$ are understood, then we just refer to the object $X \times Y$
	as the product.
\end{abuse}

Products do not always exist; for example, take a category with just two objects and no non-identity morphisms.
Nonetheless:
\begin{proposition}
	When they exist, products are unique up to isomorphism:
	given two products $P_1$ and $P_2$ of $X$ and $Y$
	there is an isomorphism between the two.
\end{proposition}
\begin{proof}
	This is very similar to the proof that initial object are unique up to unique isomorphism.
	Consider two such objects $P_1$ and $P_2$, and the associated projection maps.
	So, we have a diagram
	\begin{diagram}
		&& X && \\
		& \ruProj^{\pi_X^1} & \uProj_{\pi_X^2} & \luProj^{\pi_X^1} & \\
		P_1 & \rTo~f & P_2 & \rTo~g & P_1 \\
		& \rdProj_{\pi_Y^1} & \dProj_{\pi_Y^2} & \ldProj_{\pi_Y^1} & \\
		&& Y &&
	\end{diagram}
	There are unique morphisms $f$ and $g$ between $P_1$ and $P_2$ that
	make the entire diagram commute, according to the universal property.

	On the other hand, look at $g \circ f$ and focus on just the outer square.
	Observe that $g \circ f$ is a map which makes the outer square commute,
	so by the universal property of $P_1$ it is the only one.
	But $\id_{P_1}$ works as well.
	Thus $\id_{P_1} = g \circ f$.
	Similarly, $f \circ g = \id_{P_2}$ so $f$ and $g$ are isomorphisms.
\end{proof}
\begin{exercise}
	In fact, show the products are unique up to \emph{unique} isomorphism:
	the $f$ and $g$ above are the only isomorphisms between $P_1$ and $P_2$.
\end{exercise}

This is a bit mystical:
normally, when we want to construct an object with certain properties,
we give, well, a construction.
The ``universal property'' allows us to bypass all this work by saying
``the object with these properties is unique up to unique isomorphism'',
thus allowing us to use its properties without ever understanding its internal workings.

Of course, that's not to say we can't give concrete examples.
\begin{example}
	[Examples of Products]
	\listhack
	\begin{enumerate}[(a)]
		\ii In $\catname{Set}$, the product of two sets $X$ and $Y$ is their Cartesian product.
		\ii In $\catname{Grp}$, the product of $G$, $H$ is the group product $G \times H$.
		\ii In $\catname{Vect}_k$, the product of $V$ and $W$ is $V \oplus W$.
		\ii Let $\mathcal P$ be a poset interpreted as a product.
		Then the product of two objects $x$ and $y$ is the \vocab{greatest lower bound};
		for example,
		\begin{itemize}
			\ii If the poset is $(\RR, \le)$ then it's $\min\{x,y\}$.
			\ii If the poset is the subsets of a finite set by inclusion, then it's $x \cap y$.
			\ii If the poset is the positive integers ordered by division, then it's $\gcd(x,y)$.
		\end{itemize}
	\end{enumerate}
\end{example}

Of course, we can define products of more than just one object.
Consider a set of objects $(X_i)_{i \in I}$ in a category $\AA$
We define a \vocab{cone} on the $X_i$ to be an object to be an object $A$
with some ``projection'' maps onto each $X_i$.
Then the \vocab{product} is a cone $P$ which is ``universal'' in the same sense as before:
given any other cone $A$ there is a unique map $A \to P$ making the diagram commute.
In short, a product is a ``universal cone''.

The picture of this is
\begin{diagram}
	&& A && \\
	& \ldProj(2,4) \ldProj(1,4) & \dTo~{!\exists f} & \rdProj(2,4) \rdProj(1,4)& \\
	&& P && \\
	& \ldProj \ldProj(1,2) && \rdProj \rdProj(1,2) & \\
	X_1 & X_2 && X_3 & X_4
\end{diagram}
See also \Cref{prob:associative_product}.

One can also do the dual construction to get a \vocab{coproduct}: given $X$ and $Y$, it's the object that $X+Y$
together with maps $X \taking{\iota_X} X+Y$ and $Y \taking{\iota_Y} X+Y$
(that's Greek $\iota$, think inclusion)
such that for any object $A$ and maps $X \taking g A$, $Y \taking h A$
there is a unique $f$ for which
\begin{diagram}
	X &&&& \\
	& \rdTo(1,2)_{\iota_X} \rdTo(3,2)^g && \\
	& X+Y & \rTo~{!\exists f} & A \\
	\ruTo(1,2)^{\iota^Y} && \ruTo(3,2)_h & \\
	Y &&&&
\end{diagram}
commutes.
We'll leave some of the concrete examples as an exercise this time.
Predictable terminology: a coproduct is a universal \vocab{cocone}.

\section{Equalizers}
\prototype{The equalizer of $f,g : X \to Y$ is the set of points with $f(x) = g(x)$.}
Given two sets $X$ and $Y$, and maps $X \taking{f,g} Y$, we define their \vocab{equalizer} to be
\[ \left\{ x \in X \mid f(x) = g(x) \right\}. \]
We would like a categorical way of defining this, too.

Consider two objects $X$ and $Y$ with two parallel maps $f$ and $g$ between them.
Stealing a page from \cite{msci}, we call this a \vocab{fork}:
\begin{diagram}
	X & \pile{\rTo^f \\ \rTo_g} & Y
\end{diagram}
A cone over this fork is an object $A$ and arrows over $X$ and $Y$ which make the diagram commute, like so.
\begin{diagram}
	A && \\
	\dTo^q & \rdDashed^{f \circ q = g \circ q} & \\
	X & \pile{\rTo^f \\ \rTo_g} & Y
\end{diagram}
Effectively, the arrow over $Y$ is just forcing $f \circ q = g \circ q$.
In any case, the \vocab{equalizer} of $f$ and $g$ is a ``universal cone'' over this fork:
a map $E \taking{e} X$ such that $\exists ! h : A \to E$ such that
\begin{diagram}
	& A & \\
	\ldTo(1,3)^q & \dTo~{!\exists h} & \rdDashed(1,3) \\
	& E & \\
	X \ldTo(1,1)^e & \pile{\rTo^f \\ \rTo_g} & \rdDashed(1,1) Y \\
\end{diagram}
commutes; in other words, any map $A \taking{q} X$ equalizing $X \taking{f,g} Y$
must factor uniquely through $E$.
Again, the dotted arrows can be omitted, and as before equalizers may not exist.
But when they do exist:
\begin{exercise}
	Show uniqueness of equalizers up to unique isomorphism).
\end{exercise}

\begin{example}
	[Examples of Equalizers]
	\listhack
	\begin{enumerate}[(a)]
		\ii In $\catname{Set}$, given $X \taking{f,g} Y$
		the equalizer $E$ can be realized as $E = \{x \mid f(x) = g(x)\}$,
		with the inclusion $e : E \injto X$ as the morphism.
		As usual, by abuse we'll often just refer to $E$ as the equalizer.

		\ii Ditto in $\catname{Top}$, $\catname{Gp}$.
		One has to check that the appropriate structures are preserved
		(e.g. one should check that $\{\phi(g) = \psi(g) \mid g \in G\}$ is a group).

		\ii In particular, given a homomorphism $\phi : G \to H$, the inclusion
		$ \ker\phi \injto G $
		is an equalizer for the fork $G \to H$ by $\phi$ and the trivial homomorphism.
	\end{enumerate}
\end{example}

According to (c) equalizers let us get at the concept of a kernel if there is a distinguished
``trivial map'', like the trivial homomorphism in $\catname{Grp}$.
We'll flesh this idea out in the chapter on abelian categories.

\begin{remark}
	[Digression on Limits]
	We've defined cones over discrete sets of $X_i$ and over forks.
	It turns out you can also define a cone over any general \vocab{diagram} of objects and arrows;
	we specify a projection from $A$ to each object and
	require that the projections from $A$ commute with the arrows in the diagram.
	(For example, a fork is a diagram with two edges and two parallel arrows.)
	If you then demand the cone be universal, you have the extremely general definition of a \vocab{limit}.
	As always, these are unique up to unique isomorphism.
	We can also define the dual notion of a \vocab{colimits} in the same way.
\end{remark}

\section{Monic and Epic Maps}
The notion of ``injective'' doesn't make sense in an arbitrary category since arrows need not be functions.
The correct categorical notion is:
\begin{definition}
	A map $X \taking f Y$ is \vocab{monic} (or a monomorphism) if for any commutative diagram
	\begin{diagram}
		A & \pile{\rTo^g \\ \rTo_h} & X & \rTo^f Y 
	\end{diagram}
	we must have $g = h$.
	In other words, $f \circ g = f \circ h \implies g = h$.
\end{definition}
\begin{ques}
	Verify that in a concrete category,
	injective $\implies$ monic.
\end{ques}
In most situations, the converse is also true:
\begin{exercise}
	Show that in $\catname{Set}$, $\catname{Grp}$, $\catname{Ring}$,
	monic implies injective. (Take $A = \{\ast\}$, $A = \{1\}$, $A = \ZZ[x]$.)
\end{exercise}
More generally, as we said before there are many categories
with a free object that you can use to think of as elements.
An element of a set is function $1 \to S$, and element of a ring is a function $\ZZ[x] \to R$, et cetera.
In all these categories, the definition of monic literally reads ``$f$ is injective on $\Hom_\AA(A, X)$''.
So in these categories, ``monic'' and ``injective'' coincide.
(But there are some examples of categories without free objects where one can have monic,
non-injective maps.)
\begin{ques}
	Show that the composition of two monic maps is monic.
\end{ques}

Of course, we can also take the dual notion.
\begin{definition}
	A map $X \taking f Y$ is \vocab{epic} (or an epimorphism) if for any commutative diagram
	\begin{diagram}
		X & \rTo^f & Y & \pile{\rTo^g \\ \rTo_h} & A
	\end{diagram}
	we must have $g = h$.
	In other words, $g \circ f = h \circ f \implies g = h$.
\end{definition}

This is kind of like surjectivity, although it's a little farther than last time.
Note that in concrete categories, surjective $\implies$ epic.
\begin{exercise}
	Show that in $\catname{Set}$, $\catname{Grp}$, $\catname{Ab}$, $\catname{Vect}_k$, $\catname{Top}$,
	the notions of epic and surjective coincide.
	(For $\catname{Set}$, take $A = \{0, 1\}$.)
\end{exercise}
However, there are more cases where it fails.
Most notably:
\begin{example}
	[Epic but not Surjective]
	\listhack
	\begin{enumerate}[(a)]
		\ii In $\catname{Ring}$, for instance, the inclusion $\ZZ \injto \QQ$ is epic.
		Indeed, if a homomorphism $\QQ \to Z$ agrees on every integer then it agrees everywhere (why?),
		\ii In the category of \emph{Hausdorff} topological spaces
		(every two points have disjoint neighborhoods),
		in fact epic $\iff$ dense image (like $\QQ \injto \RR$).
	\end{enumerate}
	Thus failures arise when a function $f : X \to Y$ can be determined by just some of the points of $X$.
\end{example}

\section\problemhead

\begin{sproblem}
	Let $\AA$ be a category.
	Show that any two initial objects $A_1$, $A_2$ of $\AA$ are \emph{uniquely isomorphic};
	there is a unique isomorphism between them.
	\label{prob:initial_object}
\end{sproblem}

\begin{dproblem}
	What is the coproduct $X+Y$ in the categories $\catname{Set}$, $\catname{Vect}_k$, and a poset?
\end{dproblem}

\begin{problem}
	In any category $\AA$ where all products exist,
	show that \[ (X \times Y) \times Z \cong X \times (Y \times Z) \]
	where $X$, $Y$, $Z$ are arbitrary objects.
	\label{prob:associative_product}
\end{problem}

\begin{sproblem}[Equalizers are Monic]
	Show that the equalizer of any fork is monic.
	\label{prob:equalizer_monic}
\end{sproblem}

\begin{problem}
	\gim
	Consider a category $\AA$ with a \vocab{zero object},
	meaning an object which is both initial and terminal. 
	Given objects $X$ and $Y$ in $A$, prove that the projection $X \times Y \to X$ is epic.
\end{problem}

\chapter{Functors and Natural Transformations}
Functors are maps between categories; natural transformations are maps between functors.

\section{Functors}
\prototype{Forgetful functors; fundamental groups; $-^\vee$.}
In mathematics, we'd often like to take an object from one category and get an object from another category.
For example, given a group we might like to obtain a set;
given a set, we might like to consider the vector space whose basis is that set,
and so on.
The nice way to do that is using the notion of a functor:
category theorists are always asking ``what are the maps?'',
and so we can now think about maps between categories.

\begin{definition}
	Let $\AA$ and $\BB$ be categories.
	A \vocab{functor} $F$ takes every object of $A$ to an object of $B$
	and every arrow $A_1 \taking{f} A_2$ to an arrow $F(A_1) \taking{F(f)} F(A_2)$.
	You can picture this as follows.
	\begin{diagram}
		& A_1 & & B_1 & = F(A_1) & \\
		\AA \ni & \dTo^f & \rDotted^F & \dTo_{F(f)} && \in \BB \\
		& A_2 & & B_2 & = F(A_2) &
	\end{diagram}
	(I'll try to use dotted arrows for functors, which cross different categories, for emphasis.)
	It needs to satisfy the following requirements:
	\begin{itemize}
		\ii Identity arrows get sent to identity arrows:
		for each identity arrow $\id_A$, we have $F(\id_A) = \id_{F(A)}$.
		\ii The functor respects composition:
		if $A_1 \taking f A_2 \taking g A_3$ are arrows in $\AA$,
		then $F(g \circ f) = F(g) \circ F(f)$.
	\end{itemize}
\end{definition}

\begin{example}
	[Free and Forgetful Functors]
	Note that these are both informal terms.
	\begin{enumerate}[(a)]
		\ii A \vocab{forgetful functor} is a functor that ``forgets'' some structure.
		For example, there is a forgetful functor $U : \catname{Vect}_k \to \catname{Set}$
		by taking $V$ to the set of vectors $U(V)$; certainly a linear map $T : V \to W$
		gives a map $U(T) : U(V) \to U(W)$ of the underlying point-sets.
		In other words we ``forget'' that $V$ has a vector space structure.

		Similarly there are forgetful functors from $\catname{Grp}$, $\catname{Ring}$, etc. to set.
		There is even a forgetful functor $\catname{Ring} \to \catname{Grp}$: send a ring $R$
		to the abelian group $(R,+)$.

		\ii A \vocab{free functor} is in some sense the opposite.
		A free functor $F : \catname{Set} \to \catname{Vect}_k$ can be taken by considering
		$F(S)$ to be the vector space with basis $S$.
	\end{enumerate}
\end{example}
\begin{remark}
	There is also a notion of ``injective'' and ``surjective'' for functors (on arrows) as follows.
	A functor $F : \AA \to \BB$ is \vocab{faithful}/\vocab{full} if for any $A_1, A_2$,
	$F : \Hom_\AA(A_1, A_2) \to \Hom_\BB(FA_1, FA_2)$ is injective/surjective.

	We can use this to give an exact definition of concrete category:
	it's a category with an faithful forgetful functor to $U: \AA \to \catname{Set}$.
\end{remark}

\begin{example}
	[Functors from $\mathcal G$]
	Let $G$ be a group and $\mathcal G = \{\ast\}$ be the associated one-object category.
	\begin{enumerate}[(a)]
		\ii Consider a functor $F : \mathcal G \to \catname{Set}$, and let $S = F(\ast)$.
		Then the data of $F$ corresponds to putting a \emph{group action} of $G$ on $S$.
		\ii Consider a functor $F : \mathcal G \to \catname{FDVect}_k$, and let $V = F(\ast)$ have dimension $n$.
		Then the data of $F$ corresponds to embedding $G$ as a subgroup of the $n \times n$ matrices
		(i.e.\ the linear maps $V \to V$).
		This is one way groups historically arose; the theory of viewing groups as matrices
		forms the field of representation theory.
		\ii Let $H$ be a group and construct $\mathcal H$ the same way.
		Then functors $\mathcal G \to \mathcal H$ correspond to homomorphism $G \to H$.
	\end{enumerate}
\end{example}
\begin{exercise}
	Check the above group-based functors work as advertised.
\end{exercise}

Now we present one much trickier example.
If you don't get this one at first, skip it and come back later.
\begin{example}
	[Covariant Yoneda Functor]
	For a category $\AA$, define the \vocab{covariant Yoneda functor} $H^A : \AA \to \catname{Set}$
	by defining \[ H^A(A_1) \defeq \Hom_\AA (A, A_1) \in \catname{Set}. \]
	Hence each $A_1$ is sent to the \emph{arrows from $A$ to $A_1$};
	so \textbf{$H^A$ describes how $A$ sees the world}.
	Now we want to specify how $H^A$ behaves on arrows.
	For each arrow $A_1 \taking{f} A_2$, we need
	to specify $\catname{Set}$-map $\Hom_\AA (A, A_1) \to \Hom(A, A_2)$;
	in other words, we need to send an arrow $A \taking{p} A_1$ to an arrow $A \to A_2$.
	There's only one reasonable way to do this: take the composition
	\[ A \taking{p} A_1 \taking{f} A_2. \]
	In other words, $H_A(f)$ is $p \mapsto p \circ f$.
	In still other words, $H_A(f) = - \circ f$;
	the $-$ is a slot for the input to go into.
\end{example}

As another example:
\begin{ques}
	If $\mathbb P$ and $\mathbb Q$ are posets interpreted as categories,
	what does a functor from $\mathbb P$ to $\mathbb Q$ represent?
\end{ques}
\begin{ques}
	Verify that there is a category of \emph{all categories},
	$\catname{Cat}$, whose arrows are functors.
	In particular, you will need to name the ``identity functors''
	and verify that the composition of a functor is also a functor.
\end{ques}

The dual notion of a functor is a \vocab{contravariant functor}.
They work exactly the same way, except the arrows get flipped by the functor.
You can think of this is a functor $\AA \to \BB^{\text{op}}$ (equivalently, $\AA^{\text{op}} \to \BB$). Pictorially:
\begin{diagram}
	& A_1 & & B_1 & = F(A_1) & \\
	\AA \ni & \dTo^f & \rDotted^F & \uTo_{F(f)} && \in \BB \\
	& A_2 & & B_2 & = F(A_2) &
\end{diagram}
For emphasis, a usual functor is often called a \vocab{covariant functor}.

Contravariant functors come up in a lot in geometric applications.
Here's why.
If $X$ is a geometric object, we'll often consider
the \emph{set of functions} $X \taking\psi A$ for some particular $A$.
For example, if $V$ was a vector space, we could consider the functions $V \to k$,
giving the dual module $V^\vee$.
Or if $X$ was a space, we might consider the continuous
real functions $X \taking{p} \RR$.
As a non-geometric example: for a set $S$,
a function $S \to \{x,y\}$ corresponds to a subset of $S$.

Now suppose you have two spaces $X$, $Y$ and a map $f : X \to Y$.
Then given $Y \taking p \RR$, you automatically get a map $X \taking{f} Y \taking{p} \RR$.
And it turns out this is a functor!
This general construction can be done in any category $\AA$, as follows:
\begin{example}[Contravariant Yoneda Functor]
	The \vocab{contravariant Yoneda functor} $H_A : \AA^{\text{op}} \to \catname{Set}$;
	is used to describe how objects of $\AA$ see $A$.
	For each $X \in \AA$ it puts \[ H_A(X) \defeq \Hom_{\AA}(X, A) \in \catname{Set}. \]
	For $X \taking{f} Y$, $H_A(f)$ sends each arrow $Y \taking{p} A \in \Hom_\AA(Y,A)$ to 
	\[ X \taking{f} Y \taking{p} A \quad \in \Hom_\AA(X,A) \]
	as we did above.
	Thus $H_A(f)$ is an arrow from $\Hom_\AA(Y,A) \to \Hom_\AA(X,A)$.
	(Note the flipping!)
\end{example}
\begin{remark}
	Dually, there is also a \vocab{covariant Yoneda functor} $H^A : \AA \to \catname{Set}$
	by $H^A(X) = H^A(A, X)$. This guy describes how $A$ sees the world.
	\label{def:covariant_yoneda}
\end{remark}

\begin{example}[$V \mapsto V^\vee$ is Contravariant]
	Consider the category $\catname{Vect}_k$.
	If you read the digression on dual spaces,
	you now know there is a contravariant functor $\catname{Vect}_k \to \catname{Vect}_k$ by
	taking the \emph{dual} $V^\vee$ of a vector space $V$:
	\begin{diagram}
		V & & V^\vee \\
		\dTo^T & \rDotted^{-^\vee} & \uTo_{T^\vee} \\
		W & & W^\vee
	\end{diagram}
\end{example}

Suppose $G \cong H$ are groups, and $U : \catname{Grp} \to \catname{Set}$ is forgetful.
Then we get two sets $U(G)$ and $U(H)$.
These two sets have the same cardinality and are isomorphic in $\catname{Set}$.
Now the beauty of category theory shows itself: this in fact works \emph{for any functors and categories},
and the proof is done solely through arrows.

\begin{theorem}
	[Functors Preserve Isomorphism]
	\label{thm:functor_isom}
	If $A_1 \cong A_2$ are isomorphic objects in $\AA$
	and $F : \AA \to \BB$ is a functor
	then $F(A_1) \cong F(A_2)$.
\end{theorem}
\begin{proof}
	Try it yourself! The picture is:
	\begin{diagram}
		& A_1 & & B_1 & = F(A_1) & \\
		\AA \ni & \dTo^f \uTo_g & \rDotted^F & \dTo^{F(f)} \uTo_{F(g)} && \in \BB \\
		& A_2 & & B_2 & = F(A_2) &
	\end{diagram}
	You'll need to use both key properties of functors: they preserve composition
	and the identity map.
\end{proof}

This will be super convenient in algebraic topology, for example.
We'll show from a space $X$ you can create a group $\pi_n(X)$ or $H_n(X)$ that
gives information about the space $X$.
If we can show verify this is in fact a functor $\catname{Top} \to \catname{Grp}$,
then for $X \cong Y$, we get for free that $\pi_n(X) \cong \pi_n(Y)$ and $H_n(X) \cong H_n(Y)$.

\section{Natural Transformations}
\emph{Note}: we won't use natural transformations anywhere else in the Napkin,
and it's included here just for completeness.

We made categories to keep track of objects and maps, then went a little crazy and asked
``what are the maps between categories?'' to get functors.
Now we'll ask ``what are the maps between functions?'' to get natural transformations.

It might sound terrifying that we're drawing arrows between functors, but this is actually an old idea.
Recall that given two paths $\alpha, \beta : [0,1] \to X$,
we built a path-homotopy by ``continuously deforming'' the path $\alpha$ to $\beta$;
this could be viewed as a function $[0,1] \times [0,1] \to X$.
The definition of a natural transformation is similar: we want to pull $F$ to $G$
along a series of arrows in the target space $\BB$.

\begin{definition}
	Let $F, G : \AA \to \BB$ be two functors.
	A \vocab{natural transformation} $\alpha$ from $F$ to $G$, denoted
	\[ \nattfm{\AA}{F}{\alpha}{G}{\BB} \]
	consists of, for each $A \in \AA$ an arrow $\alpha_A \in \Hom_\BB(F(A), G(A))$, which is
	called the \vocab{component} of $\alpha$ at $A$.
	Pictorially, it looks like this:
	\begin{diagram}
		& & & F(A) \in \BB \\
		\AA \ni & A & \ruDotted(2,1)^F & \dTo_{\alpha_A} \\
		& & \rdDotted(2,1)^G & G(A) \in \BB
	\end{diagram}
	These $\alpha_A$ are subject to the ``naturality'' requirement that for any $A_1 \taking{f} A_2$,
	the diagram
	\begin{diagram}
		F(A_1) & \rTo^{F(f)} & F(A_2) \\
		\dTo_{\alpha_{A_1}} & & \dTo_{\alpha_{A_2}} \\
		G(A_1) & \rTo_{G(f)} & G(A_2)
	\end{diagram}
	commutes.
\end{definition}
The arrow $\alpha_A$ represents the path that $F(A)$ takes to get to $G(A)$
(just as in a path-homotopy from $\alpha$ to $\beta$
each \emph{point} $\alpha(t)$ gets deformed to the \emph{point} $\beta(t)$ continuously).
A picture might help: consider
\begin{center}
	\begin{asy}
		size(14cm);
		dotfactor *= 1.4;

		path sparrow(pair X, pair Y) {
			// Short for "spaced arrow"
			return (0.9*X+0.1*Y)--(0.1*X+0.9*Y);
		}

		pair A1 = Drawing("A_1", dir(210), dir(225));
		pair A2 = Drawing("A_2", origin, dir(90));
		pair A3 = Drawing("A_3", dir(-30), dir(-45));
		path f = Drawing(sparrow(A2, A1), EndArrow);
		label("$f$", f, dir(90));
		path g = Drawing(sparrow(A2, A3), EndArrow);
		label("$g$", g, dir(90));
		label("$\mathcal A$", 0.6*(A1+A3));

		pen p = blue;
		transform FF = shift( (3.5, 0.7) );
		dot("$F(A_1)$", FF*A1, dir(225), p);
		dot("$F(A_2)$", FF*A2, dir(90), p);
		dot("$F(A_3)$", FF*A3, dir(-45), p);
		draw(FF*f, p, EndArrow);
		draw(FF*g, p, EndArrow);
		label("$F(f)$", FF*f, dir(110), p);
		label("$F(g)$", FF*g, dir(70), p);
		draw(FF*f, p+1.4);
		draw(FF*g, p+1.4);

		p = deepcyan;
		transform GG = shift( (3.5, -0.7) );
		dot("$G(A_1)$", GG*A1, dir(225), p);
		dot("$G(A_2)$", GG*A2, 3*dir(-90), p);
		dot("$G(A_3)$", GG*A3, dir(-45), p);
		label("$G(f)$", D(GG*f, p, EndArrow), dir(110), p);
		label("$G(g)$", D(GG*g, p, EndArrow), dir(70), p);
		draw(GG*f, p+1.4);
		draw(GG*g, p+1.4);

		p = lightred;
		label("$\alpha_{A_1}$", D(sparrow(FF*A1, GG*A1), p, EndArrow), dir(180), p);
		label("$\alpha_{A_2}$", D(sparrow(FF*A2, GG*A2), p, EndArrow), dir(180), p);
		label("$\alpha_{A_3}$", D(sparrow(FF*A3, GG*A3), p, EndArrow), dir(0), p);

		p = magenta + dotted + 0.7;
		path Fa = (0.5,0)--FF*(-1,-0.2);
		path Ga = (0.5,-0.6)--GG*(-1,-0.4);
		label("$F$", D(Fa, p, EndArrow), dir(135), p);
		label("$G$", D(Ga, p, EndArrow), dir(225), p);

		p = lightred + 0.7;
		label("$\alpha$", D(sparrow(midpoint(Fa), midpoint(Ga)), p, EndArrow), dir(180), p);

		p = grey + dashed;
		pointpen = p;
		pair B1 = D(midpoint(FF*A2--GG*A1));
		pair B2 = D(0.6 * (FF*A3) + 0.4 * (GG*A2));
		draw(sparrow(FF*A1, B1), p, EndArrow);
		draw(sparrow(GG*A2, B1), p, EndArrow);
		draw(sparrow(FF*A3, B2), p, EndArrow);
		pair B3 = D(FF*A3 + 0.7*dir(100));
		draw(sparrow(B3, FF*A3), p, EndArrow);
		label("$\mathcal B$", GG*(0.6*(A1+A3)));
		draw(sparrow(FF*A2, GG*A3), p, EndArrow);
		pair B4 = D(FF*A1 + 0.5*dir(90));
		draw(sparrow(FF*A1, B4), p, EndArrow);
	\end{asy}
\end{center}
Here $\AA$ is the small black category with three elements and two non-identity arrows $f$, $g$.
(I've omitted the identity arrows for simplicity).
The images of $\AA$ under $F$ and $G$ are the blue and green ``subcategories'' of $\BB$.
Note that $\BB$ could potentially have many more objects and arrows in it (grey).
The natural transformation $\alpha$ (red) selects an arrow of $\BB$ from each $F(A)$
to the corresponding $G(A)$, such dragging the entire image of $F$ to the image of $G$.
Finally, we require that any diagram formed by the blue, red, and green arrows is commutative (naturality),
so the natural transformation is really ``natural''.

There is a second equivalent definition that looks much more like the homotopy.
\begin{definition}
	Let $\mathbf 2$ denote the category generated by a poset with two elements $0 \le 1$, that is,
	\begin{center}
	\begin{tikzpicture}[scale=2]
		\SetVertexMath
		\Vertices{circle}{1,0}
		\Edge[style={->}, label={$0 \le 1$}](0)(1)
		\Loop[dist=12, dir=NO, label={$\id_0$}, labelstyle={above=1pt}](0)
		\Loop[dist=12, dir=NO, label={$\id_1$}, labelstyle={above=1pt}](1)
	\end{tikzpicture}
	\end{center}
	Then a \emph{natural transformation} 
	$ \nattfm{\AA}{F}{\alpha}{G}{\BB} $
	is just a functor $\alpha : \AA \times \mathbf 2 \to \BB$ with
	\[ \alpha(0,A) = F(A), \;\; \alpha(0,f) = F(f) 
		\quad\text{and}\quad
	\alpha(1,A) = G(A), \;\; \alpha(1,f) = G(f). \]
	or more succinctly, $\alpha(0,-) = F$, $\alpha(1,-) = G$.
\end{definition}
The proof that these are equivalent is left as a practice problem.

Naturally, two natural transformations $\alpha : F \to G$ and $\beta : G \to H$ can get composed.
\begin{diagram}
	& & F(A) \\
	& \ruDotted^F & \dTo_{\alpha_A} \\
	\AA \ni A & \rDotted^G & G(A) \\
	& \rdDotted_H & \dTo_{\beta_A} \\
	&& H(A)
\end{diagram}

Now suppose $\alpha$ is a natural transformation such that $\alpha_A$ is an isomorphism for each $A$.
In this way, we can construct an inverse arrow $\beta_A$ to it.
\begin{diagram}
	& & F(A) \in \BB \\
	\AA \ni A & \ruDotted(2,1)^F & \dTo^{\alpha_A} \uTo_{\beta_A} \\
	& \rdDotted(2,1)^G & G(A) \in \BB
\end{diagram}
In this case, we say $\alpha$ is a \vocab{natural isomorphism}.
We can then say that $F(A) \cong G(A)$ \vocab{naturally} in $A$.
(And $\beta$ is an isomorphism too!)

This is what it really means when we say that ``there is a natural / canonical isomorphism''.
For example, I claimed earlier that there was a canonical isomorphism $(V^\vee)^\vee \cong V$,
and mumbled something about ``not having to pick a basis'' and ``God-given''.
Category theory, amazingly, lets us formalize this:
it just says that $(V^\vee)^\vee \cong \id(V)$ naturally in $V \in \catname{FDVect}_k$.
Really, we have a natural transformation
\[ \nattfm{\catname{FDVect}_k}{\id}{\eps}{(-^\vee)^\vee}{\catname{FDVect}_k}. \]
where the component $\eps_V$ is given by $v \mapsto \opname{ev}_v$
(as discussed earlier,
the fact that it is an isomorphism follows from the fact that $V$ and $(V^\vee)^\vee$
have equal dimensions and $\eps_V$ is injective).

% A last remark: similar to the situation with groups isomorphisms,
% collecting all these $\beta_A$'s gives a natural isomorphism too.
\begin{ques}
	In fact, there is a category $[\AA, \BB]$ of \emph{functors} from $\AA$ into $\BB$,
	whose arrows are natural transformations.
	When are two functors isomorphic in $[\AA, \BB]$?
\end{ques}
As a result of this, we also write $F \cong G$ to mean $F(X) \cong G(X)$

\section\problemhead
\begin{dproblem}
	Let $X$ and $Y$ be objects in a category $\AA$.
	Show that $X \cong Y$ if and only if $H_X(A) \cong H_Y(A)$ naturally in $A$.\footnote{
		From \cite{ref:msci}: let's consider $\AA = \catname{Grp}$ for concreteness.
		Suppose $A$, $X$, $Y$ are groups such that $H_X(A) \cong H_Y(A)$ for all $A$.
		If $A = \ZZ$, then $\left\lvert X \right\rvert = \left\lvert Y \right\rvert$.
		If $A = \ZZ / p\ZZ$, then $X$ and $Y$ have the same number of elements of order $p$.
		Each $A$ gives us some information on how $X$ and $Y$ are similar,
		but the whole natural isomorphism is strong enough to imply $X \cong Y$.}
\end{dproblem}

\begin{problem}
	Show that the two definitions of natural transformation
	(one in terms of $\AA \times \mathbf 2 \to \BB$
	and one in terms of arrows $F(A) \taking{\alpha_A} G(A)$) 
	are equivalent.
	\begin{hint}
		The category $\AA \times \mathbf 2$ has ``redundant arrows''.
	\end{hint}
	\begin{sol}
		The main observation is that in $\AA \times \mathbf 2$,
		you have the arrows in $\AA$ (of the form $(f, \id_{\mathbf 2})$),
		and then the arrows crossing the two copies of $\AA$ (of the form $(\id_A, 0 \le 1)$).
		But there are some more arrows $(f, 0 \le 1)$: nonetheless, they can be thought of as compositions
		\[ (f, 0 \le 1) = (f, \id_{\mathbf 2}) \circ (\id_A, 0 \le 1) = (\id_A, 0 \le 1) \circ (f, \id_{\mathbf 2}). \]
		Now we want to specify a functor $\alpha : \AA \times \mathbf 2$, we only have to specify
		where each of these two more basic things goes.
		The conditions on $\alpha$ already tells us that $(f, \id_{\mathbf 2})$ should be mapped to $F(f)$ or $G(f)$
		(depending on whether the arrow above is in $\AA \times \{0\}$ or $\AA \times \{1\}$),
		and specifying the arrow $(\id_A, 0 \le 1)$ amounts to specifying the $A$th component.
		Where does naturality come in?

		The above discussion transfers to products of categories in general:
		you really only have to think about $(f, \id)$ and $(\id, g)$ arrows
		to get the general arrow $(f,g) = (f, \id) \circ (\id, g) = (\id, g) \circ (f, \id)$.
	\end{sol}
\end{problem}

\begin{problem}
	Let $\AA$ be the category of finite sets whose arrows are bijections between sets.
	For $A \in \AA$,
		let $F(A)$ be the set of \emph{permutations} of $A$ and
		let $G(A)$ be the set of \emph{orderings} on $A$.\footnote{
			A permutation is a bijection $A \to A$,
			and an ordering is a bijection $\{1, \dots, n\} \to A$,
			where $n$ is the size of $A$.}
	\begin{enumerate}[(a)]
		\ii Extend $F$ and $G$ to functors $\AA \to \catname{Set}$.
		\ii Show that $F(A) \cong G(A)$ for every $A$, but this isomorphism is \emph{not} natural.
	\end{enumerate}
\end{problem}

\begin{problem}
	[Yoneda Lemma]
	Let $\AA$ be a category, pick $A \in \AA$, and let $H_A$ be the contravariant Yoneda functor.
	\begin{enumerate}[(a)]
	\ii \gim
	Let $X : \AA^{\text{op}} \to \catname{Set}$ be a contravariant functor.
	Exhibit a bijection
	\[ X(A) \cong \left\{ \text{Natural transformations }
		\nattfm{\AA^{\text{op}}}{H_A}{\alpha}{X}{\catname{Set}}
	\right\}. \]
	\ii \kurumi Moreover, interpreting both sides as functors
	$[\AA^{\text{op}}, \catname{Set}] \times \AA^{\text{op}} \to \catname{Set}$
	show that the isomorphism is \emph{natural} in $X$ and $A$.
	\end{enumerate}
\end{problem}
The Yoneda Lemma has tons of very cool consequences; one is that solving it
makes you feel like a minor god.
The proof is long, but it is not actually very difficult -- from start to finish,
there is only one thing you can possibly do.

\chapter{Abelian Categories}
In this chapter I'll translate some more familiar concepts into categorical language;
this will require some additional assumptions about our category,
culminating in the definition of a so-called ``abelian category''.
Once that's done, I'll be able to tell you what this ``diagram chasing'' thing is all about.

Throughout this chapter, ``$\injto$'' will be used for monic maps and ``$\surjto$'' for epic maps.

\section{Zero Objects, Kernels, Cokernels, and Images}
\prototype{In $\catname{Grp}$, the trivial group and homomorphism are the zero objects and morphisms.
If $G$, $H$ are abelian then $\phi : G \to H$ is $H/\img \phi$.}

A \vocab{zero object} of a category is an object $0$ which is both final and terminal;
of course, it's unique up to unique isomorphism.
For example, in $\catname{Grp}$ the zero object is the trivial group, 
in $\catname{Vect}_k$ it's the zero-dimensional vector space consisting of one point, and so on.
\begin{ques}
	Show that $\catname{Set}$ and $\catname{Top}$ don't have zero objects.
\end{ques}
For the rest of this chapter, all categories will have zero objects.

In a category $\AA$ with zero objects, any two objects $A$ and $B$ thus have a distinguished morphism
\[ A \to 0 \to B \]
which is called the \vocab{zero morphism} and also denoted $0$.
For example, in $\catname{Grp}$ this is the trivial homomorphism.

We can now define:
\begin{definition}
	Consider a map $A \taking f B$.
	The \vocab{kernel} is defined as the equalizer of this map and the map $A \taking 0 B$.
	Thus, it's a map $\ker A : \Ker A \injto A$ such that
	\begin{diagram}
		\Ker A && \\
		\dInj^{\ker A} & \rdDashed^0 & \\
		A & \rTo_f & B
	\end{diagram}
	commutes, and moreover any other map with the same property factors uniquely through $\Ker A$
	(so it is universal with this property).
	By \Cref{prob:equalizer_monic}, $\ker A$ is a monic morphism, 
	which justifies the use of ``$\injto$''.
\end{definition}
Notice that we're using $\ker f$ to represent the map and $\Ker f$ to represent the object
Similarly, we define the cokernel, the dual notion:
\begin{definition}
	Consider a map $A \taking f B$.
	The \vocab{cokernel} is defined as the coequalizer of this map and the map $A \taking 0 B$.
	Thus, it's a map $\coker B: B \surjto \Coker B$ such that
	\begin{diagram}
		A & \rTo^f & B \\
		& \rdDashed_0 & \dSurj_{\coker B} \\
		&& \Coker B
	\end{diagram}
	commutes, and moreover any other map with the same property factors uniquely through $\Ker A$
	(so it is universal with this property).
	By the dual of \Cref{prob:equalizer_monic}, $\coker A$ is a epic morphism,
	which justifies the use of ``$\surjto$''.
\end{definition}
Think of the cokernel of a map $A \taking f B$ as ``$B$ modulo the image of $f$'', e.g.
\begin{example}
	[Cokernels]
	Consider the map $\Zc6 \to D_{12} = \left\langle r,s \mid r^6=s^2=1, rs=sr\inv\right\rangle$.
	Then the cokernel of this map in $\catname{Gp}$ is $D_{12} / \left\langle r \right\rangle \cong \Zc 2$.
\end{example}
This doesn't always work out quite the way we want since in general the image of
a homomorphism need not be normal in the codomain.
Nonetheless, we can use this to define:
\begin{definition}
	The \vocab{image} of $A \taking f B$ is the kernel of $\coker f$.
	We denote $\Img f = \Ker(\coker f)$.
	This gives a unique map $\img f : A \to \Img f$.
\end{definition}
When it exists, this coincides with our concrete notion of ``image''.
Picture:
\begin{diagram}
	A & \rTo^f & B \\
	& \rdTo(1,2)~{\exists!} \rdDashed(3,2)^{0\qquad\qquad} \ruInj(1,2) & & \rdSurj(1,2)^{\coker B} \\
	& \Img f & \rDashed^0 & \Coker B
\end{diagram}
Note that by universality of $\Img f$,
we find that there is a unique map $\img f : A \to \Img f$ that makes the entire diagram commute.

\section{Additive and Abelian Categories}
\prototype{$\catname{Ab}$, $\catname{Vect}_k$ are abelian categories.}
We can now define the notion of an additive and abelian category,
which are the types of categories where this notion is most useful.

\begin{definition}
	An \vocab{additive category} $\AA$ is one with the following properties.
	\begin{itemize}
		\ii $\AA$ has a zero object, and any two objects has a product.
		\ii More importantly: every $\Hom_\AA(A, B)$ forms an \emph{abelian group} (written additively)
		such that composition distributions over addition:
		\[ (g+h)\circ f = g\circ f + h\circ f
			\quad\text{and}\quad
			f\circ(g+h) = f\circ g + f \circ h. \]
		The zero map serves as the identity element for each group.
\end{itemize}
\end{definition}
\begin{definition}
	An \vocab{abelian category} $\AA$ is one with the additional properties that
	for any morphism $A \taking f B$,
	\begin{itemize}
		\ii The kernel and cokernel exist, and
		\ii The morphism factors through the image so that $\img(f)$ is epic.
	\end{itemize}
	So, this yields a diagram
	\begin{diagram}
		\Ker(f) & \rInj^{\quad\ker(f)} & A & \rSurj^{\img(f)\quad} & \Img(f) & \rInj & B & \rSurj^{\coker(f)} \Coker(f).
	\end{diagram}
\end{definition}

\begin{example}[Examples of Abelian Categories]
	\listhack
	\begin{enumerate}[(a)]
		\ii $\catname{Vect}_k$, $\catname{Ab}$ are abelian categories,
		where $f+g$ takes its usual meaning.
		\ii $\catname{Grp}$ is not even additive, because there is no way to assign
		a commutative addition to pairs of morphisms.
	\end{enumerate}
\end{example}

In general, once you assume a category is abelian, all the properties you would want
of these kernels, cokernels, \dots\ that you would guess hold true.
For example,
\begin{proposition}
	A map $A \taking f B$ is monic if and only if its kernel is $0 \to A$.
	Dually, $A \taking f B$ is epic if and only if its cokernel is $B \to 0$.
\end{proposition}
\begin{proof}
	The easy direction is:
	\begin{exercise}
		Show that if $A \taking f B$ is monic, then $0 \to A$ is a kernel.
		(This holds even in non-abelian categories.)
	\end{exercise}
	Of course, since kernels are unique up to isomorphism, this establishes
	monic $\implies$ $0$ kernel.
	
	On the other hand, assume that $0 \to A$ is a kernel of $A \taking f B$.
	For this we can use exploit the group structure of the underlying homomorphisms now.
	Assume that the diagram
	\begin{diagram}
		Z & \pile{\rTo^g \\ \rTo_h} & A & \rTo^f & B
	\end{diagram}
	commutes.
	Then $(g - h) \circ f = g \circ f - h \circ f = 0$, and we've arrived at a commutative diagram.
	\begin{diagram}
		Z && \\
		\dTo^{g-h} & \rdDotted^0 & \\
		A & \rTo_f & B
	\end{diagram}
	But since $0 \to A$ is a kernel it follows that $g-h$ factors through $0$,
	so $g-h = 0 \implies g = h$, which is to say that $f$ is monic.
\end{proof}
\begin{proposition}
	A map is an isomorphsim if and only if it is monic and epic.
\end{proposition}
\begin{proof}
	Omitted, because the Mitchell Embedding Theorem presented in a moment will trivialize this.
\end{proof}

\section{Exact Sequences}
\prototype{$0 \to G \to G \times H \to H \to 0$ is exact.}
Exact sequences will seem exceedingly unmotivated until you learn about homology groups,
which is one of the most natural places that exact sequences appear.
In light of this, it might be worth trying to read the chapter on homology groups
simultaneously with this one.

First, let me state the definition for groups, to motivate the general categorical definition.
A sequence of groups
\[ G_0 \taking{f_1} G_1 \taking{f_2} G_2 \taking{f_3} \dots \taking{f_n} G_n \]
is \emph{exact} at $G_k$ if the image of $f_k$ is the kernel of $f_{k+1}$.
We say the entire sequence is exact if it's exact at $k=1,\dots,n-1$.
\begin{example}
	[Exact Sequences]
	\listhack
	\begin{enumerate}[(a)]
		\ii The sequence
		\[ 0 \to \Zc 3
			\overset{\times 5}{\injto} \Zc{15}
			\surjto \Zc{5}
			\to 0 \]
		is exact.
		Actually, $0 \to G \injto G \times H \surjto H \to 0$ is exact in general.
		(Here $0$ denotes the trivial group.)
		\ii For groups, the map $0 \to A \to B$ is exact if and only if $A \to B$ is injective.
		\ii For groups, the map $A \to B \to 0$ is exact if and only if $A \to B$ is surjective.
	\end{enumerate}
\end{example}

Now, we want to mimic this definition in a general \emph{abelian} category $\AA$.
So, let's write down a criteria for when $A \taking f B \taking g C$ is exact.
First, we had better have that $g \circ f = 0$, which encodes the fact that $\img(g) \subset \ker(f)$.
Adding in all the relevant objects, we get the commutative diagram below.
\begin{diagram}
	A && \rDashed^0 && C \\
	\dSurj^{\img f} & \rdTo(2,1)^f & B & \ruTo(2,1)^g & \uDashed_0 \\
	\Img f & \ruInj(2,1)_{\iota} & \rDotted_{\exists!} & \luInj(2,1) & \Ker g \\
\end{diagram}
Here the map $A \surjto \Img f$ is epic since we are assuming $\AA$ is an abelian category.
So, we have that
\[ 0 = (g \circ \iota) \circ \img f = g \circ (\iota \circ \img f) = g \circ f = 0 \]
but since $\img f$ is epic, this means that $g \circ \iota = 0$.
So there is a \emph{unique} map $\Img f \to \Ker g$, and we require that this diagram commutes.
In short,
\begin{definition}
	Let $\AA$ be an abelian category. The sequence
	\[ A_0 \taking{f_1} A_1 \taking{f_2} A_2 \taking{f_3} \dots \taking{f_n} A_n \]
	is \vocab{exact} at $A_i$ if $f_i \circ f_{i+1} = 0$ and
	the canonical map $\Img f_i \to \Ker f_{i+1}$ is an isomorphism.
	The entire sequence is exact if it is exact at each $A_i$ ($1 \le i \le n-1$).
\end{definition}

\begin{exercise}
	Show that, as before, $0 \to A \to B$ is exact $\iff$ $A \to B$ is monic.
\end{exercise}

\section{The Freyd-Mitchell Embedding Theorem}
We now introduce the Freyd-Mitchell Embedding Theorem,
which essentially says that any abelian category can be realized as a concrete one.

\begin{definition}
	A category is \vocab{small} if $\obj(\AA)$ is a set (as opposed to a class),
	i.e.\ there is a ``set of all objects in $\AA$''.
	For example, $\catname{Set}$ is not small because there is no set of all sets.
\end{definition}

\begin{theorem}
	[Freyd-Mitchell Embedding Theorem]
	Let $\AA$ be a small abelian category.
	Then there exists a ring $R$ (with $1$ but possibly non-commutative)
	and a full, faithful, exact functor onto the category of left $R$-modules.
\end{theorem}
Here a functor is \vocab{exact} if it preserves exact sequences.
Essentially, this says that for any concrete category and any suitably small sub-diagram,
it suffices to think about the objects of $\AA$ as ``concrete'' objects with appropriate morphisms.
This opens up the so-called technique of \emph{diagram chasing}.

For example, let's prove the following.
\begin{lemma}
	[Short Five Lemma]
	In an abelian category, consider the commutative diagram
	\begin{diagram}
		0 & \rTo & A & \rInj^p & B & \rSurj^q & C & \rTo & 0 \\
		&& \dTo^\simeq_\alpha && \dTo_\beta && \dTo^\simeq_\gamma && \\
		0 & \rTo & A' & \rInj^{p'} & B' & \rSurj^{q'} & C' & \rTo & 0
	\end{diagram}
	and assume the top and bottom rows are exact.
	If $\alpha$ and $\gamma$ are isomorphisms, then so is $\beta$.
\end{lemma}

\begin{proof}
	We prove that $\beta$ is epic (with a dual proof to get monic).

	One can show that it's possible to take a small subcategory of $\AA$
	containing the $10$ elements and $13$ arrows above, as well as all necessary
	kernels, cokernels, et cetera.
	(Essentially, let $\BB_0$ be the diagram above and let $\BB_{i+1}$ add in any needed objects;
	then $\bigcup \BB_i$ is a set-sized category).
	Therefore by the Embedding Theorem we can treat the category as $R$-modules over some $R$.

	This lets us do a so-called ``diagram chase'' where we move elements around the picture,
	using the concrete interpretation of our category of $R$-modules.

	Let $b'$ be an element of $B'$.
	Then $q'(b') \in C'$, and since $\gamma$ is surjective, so we have a $c$ such that $\gamma(c) = b'$,
	and finally a $b \in B$ such that $q(b) = c$.
	Picture:
	\begin{diagram}
		b \in B & \rMapsto^q & c \in C \\
		\dDashed_\beta && \dMapsto^\simeq_\gamma \\
		b' \in B' & \rMapsto^{q'} & c' \in C'
	\end{diagram}
	Now, it is not necessarily the case that $\beta(b) = b'$.
	However, since the diagram commutes we at least have that
	\[ q'(b') = q'(\beta(b)) \]
	so $b' - \beta(b) \in \ker q' = \img p'$, and there is an $a' \in A$ such that
	$p'(a') = b' - \beta(b)$;
	use $\alpha$ now to lift it to $a \in A$.
	Picture:
	\begin{diagram}
		a \in A && b \in B && \\
		\dMapsto && && \\
		a' \in A' & \rMapsto & b'-\beta(b) \in B' & \rMapsto & 0 \in C'
	\end{diagram}
	Then, we have
	\[
		\beta(b + q(a)) = \beta b + \beta p a
		= \beta b + p' \alpha a
		= \beta b + (b' - \beta b)
		= b'
	\]
	so $b' \in \img \beta$ which completes the proof that $\beta'$ is surjective.
\end{proof}


\section\problemhead
\begin{problem}
	[Five Lemma]
	\gim
	In an abelian category, consider the commutative diagram
	\begin{diagram}
		A & \rTo^p & B & \rTo^q & C & \rTo^r & D & \rTo^s & E \\
		\dSurj_\alpha && \dTo^\simeq_\beta && \dTo_\gamma && \dTo^\simeq_\delta && \dInj_\eps \\
		A' & \rTo_{p'} & B' & \rTo_{q'} & C' & \rTo_{r'} & D' & \rTo_{s'} & E'
	\end{diagram}
	where the first and second rows are exact.
	Prove that if $\alpha$ is epic, $\eps$ is monic, and $\beta$, $\delta$ are isomorphisms,
	then $\gamma$ is an isomorphism as well.
	Thus this is a stronger version of the short five lemma.
\end{problem}
\begin{sproblem}
	[Snake Lemma]
	\yod
	In an abelian category, consider the diagram
	\begin{diagram}
		&& A & \rTo^f & B & \rSurj^g & C & \rTo & 0 \\
		&& \dTo_a && \dTo_b && \dTo_c && \\
		0 & \rTo & A' & \rInj_{f'} & B' & \rTo_{g'} & C' && 
	\end{diagram}
	where the first and second rows are exact sequences.
	Prove that there is an exact sequence
	\[ \Ker a \to \Ker b \to \Ker c \to \Coker a \to \Coker b \to \Coker c. \]
\end{sproblem}


\end{document}
