\chapter{Metric spaces}
\label{ch:metric_space}
At the time of writing, I'm convinced that metric topology is
the morally correct way to motivate point-set topology
as well as to generalize normal calculus.
Also, ``metric'' is a fun word to say.
So here is my best attempt.

The concept of a metric space is very ``concrete'', and lends itself easily to visualization. Hence throughout this chapter you should draw lots of pictures as you learn about new objects, like convergent sequences, open sets, closed sets, and so on.

\section{Definition and examples of metric spaces}
\prototype{$\RR^2$, with the Euclidean metric.}
\begin{definition}
	A \vocab{metric space} is a pair $(M, d)$ consisting of
	a set of points $M$
	and a \vocab{metric} $d : M \times M \to \mathbb R_{\ge 0}$.
	The distance function must obey:
	\begin{itemize}
		\ii For any $x,y \in M$, we have $d(x,y) = d(y,x)$; i.e.\ $d$ is symmetric.
		\ii The function $d$ must be \vocab{positive definite}
		which means that $d(x,y) \ge 0$ with equality if and only if $x=y$.
		\ii The function $d$ should satisfy the \vocab{triangle inequality}: for all $x,y,z \in M$,
		\[ d(x,z) + d(z,y) \ge d(x,y). \]
	\end{itemize}
\end{definition}
\begin{abuse}
	Just like with groups, we will abbreviate $(M,d)$ as just $M$.
\end{abuse}
\begin{example}[Metric spaces of $\RR$]
	\listhack
	\begin{enumerate}[(a)]
		\ii The real line $\RR$ is a metric space under the metric $d(x,y) = \left\lvert x-y \right\rvert$.
		\ii The interval $[0,1]$ is also a metric space with the same distance function.
		\ii In fact, any subset $S$ of $\RR$ can be made into a metric space in this way.
	\end{enumerate}
\end{example}
\begin{example}[Metric spaces of $\RR^2$]
	\listhack
	\begin{enumerate}[(a)]
		\ii We can make $\RR^2$ into a metric space by imposing the Euclidean distance function
		\[ d\left( (x_1, y_1), (x_2, y_2) \right) = \sqrt{(x_1-x_2)^2 + (y_1-y_2)^2}. \]
		\ii Just like with the first example, any subset of $\RR^2$ also becomes a metric space after we inherit it.
		The unit disk, unit circle, and the unit square $[0,1]^2$
		are special cases.
	\end{enumerate}
\end{example}
\begin{example}[Taxicab on $\RR^2$]
	It is also possible to place the \vocab{taxicab distance} on $\RR^2$:
	\[ d\left( (x_1, y_1), (x_2, y_2) \right) = 
		\left\lvert x_1-x_2 \right\rvert + \left\lvert y_1-y_2 \right\rvert.
		\]
	For now, we will use the more natural Euclidean metric.
\end{example}

\begin{example}[Metric spaces of $\RR^n$]
	We can generalize the above examples easily.
	Let $n$ be a positive integer.
	\begin{enumerate}[(a)]
		\ii We let $\RR^n$ be the metric space whose points are points in $n$-dimensional Euclidean space,
		and whose metric is the Euclidean metric
		\[
			d\left( 
			\left( a_1, \dots, a_n \right), \left( b_1, \dots, b_n \right)
			\right)
			= \sqrt{(a_1-b_1)^2 + \dots + (a_n-b_n)^2}.
		\]
		This is the $n$-dimensional \vocab{Euclidean space}.
		\ii The open \vocab{unit ball} $B^{n}$ is the subset of $\RR^n$
		consisting of those points $\left( x_1, \dots, x_n \right)$
		such that $x_1^2 + \dots + x_n^2 < 1$.
		\ii The \vocab{unit sphere} $S^{n-1}$ is the subset of $\RR^n$
		consisting of those points $\left( x_1, \dots, x_n \right)$
		such that $x_1^2 + \dots + x_n^2 = 1$, with the inherited metric.
		(The superscript $n-1$ indicates that $S^{n-1}$ is an $n-1$ dimensional space,
		even though it lives in $n$-dimensional space.)
		For example, $S^1 \subseteq \RR^2$ is the unit circle,
		whose distance between two points is the length of the chord joining them.
		You can also think of it as the ``boundary'' of the unit ball $B^n$.
	\end{enumerate}
\end{example}
\begin{example}
	[Function space] 
	We can let $M$ be the space of
	integrable functions $f : [0,1] \to \RR$ and define the metric
	by $d(f,g) = \int_0^1 \left\lvert f-g \right\rvert \; dx$.
\end{example}

Here is a slightly more pathological example.
\begin{example}
	[Discrete space]
	Let $S$ be any set of points (either finite or infinite).
	We can make $S$ into a \vocab{discrete space} by declaring
	\[
		d(x,y)
		=
		\begin{cases}
			1 & \text{if $x \neq y$} \\
			0 & \text{if $x = y$}.
		\end{cases}
	\]
	If $\left\lvert S \right\rvert = 4$ you might think of this space
	as the vertices of a regular tetrahedron, living in $\RR^3$.
	But for larger $S$ it's not so easy to visualize\dots
\end{example}
\begin{example}[Graphs are metric spaces]
	Any connected simple graph $G$ can be made into a metric space
	by defining the distance between two vertices to be the
	graph-theoretic distance between them.
	(The discrete metric is the special case when $G$ is the complete graph on $S$.)
\end{example}
\begin{ques}
	Check the conditions of a metric space for the metrics on the discrete space
	and for the connected graph.
\end{ques}

\begin{abuse}
	From now on, we will refer to $\RR^n$ with the Euclidean metric
	by just $\RR^n$.
	Moreover, if we wish to take the metric space for a subset $S \subseteq \RR^n$
	with the inherited metric, we will just write $S$.
\end{abuse}

\section{Convergence in metric spaces}
\prototype{The sequence $\frac1n$ (for $n=1,2,\dots$) in $\RR$.}

Since we can talk about the distance between two points, we can talk about what it means for a sequence of points to converge.
This is the same as the typical epsilon-delta definition, with absolute values replaced by the distance function.

\begin{definition}
	Let $(x_n)_{n \ge 1}$ be a sequence of points in a metric space $M$.
	We say that $x_n$ \vocab{converges} to $x$ if the following condition holds:
	for all $\eps > 0$, there is an integer $N$ (depending on $\eps$)
	such that $d(x_n, x) < \eps$ for each $n \ge N$.
	This is written \[ x_n \to x \] or more verbosely as \[ \lim_{n \to \infty} x_n = x. \]
	We say that a sequence converges in $M$ if it converges to a point in $M$.
\end{definition}
You should check that this definition coincides with your intuitive notion of ``converges''.
\begin{abuse}
	If the parent space $M$ is understood, we will allow ourselves
	to abbreviate ``converges in $M$'' to just ``converges''.
	However, keep in mind that convergence is defined relative to the parent space;
	the ``limit'' of the space must actually be a point in $M$ for a sequence to converge.
\end{abuse}

\begin{center}
	\begin{asy}
		size(9cm);
		Drawing("x_1", (-9,0.1), dir(90));
		Drawing("x_2", (-6,0.8), dir(90));
		Drawing("x_3", (-5,-0.3), dir(90));
		Drawing("x_4", (-2, 0.8), dir(90));
		Drawing("x_5", (-1.7, -0.7), dir(-90));
		Drawing("x_6", (-0.6, -0.3), dir(225));
		Drawing("x_7", (-0.4, 0.3), dir(90));
		Drawing("x_8", (-0.25, -0.24), dir(-90));
		Drawing("x_9", (-0.12, 0.1), dir(45));
		dot("$x$", (0,0), dir(-45), blue);
		draw(CR(origin, 1.5), blue+dashed);
	\end{asy}
\end{center}

\begin{example}
	Consider the sequence
	$x_1 = 1$, $x_2 = 1.4$, $x_3 = 1.41$, $x_4 = 1.414$, \dots.
	\begin{enumerate}[(a)]
		\ii If we view this as a sequence in $\RR$, it converges to $\sqrt 2$.
		\ii However, even though each $x_i$ is in $\QQ$,
		this sequence does NOT converge when we view it as a sequence in $\QQ$!
	\end{enumerate}
\end{example}

\begin{ques}
	What are the convergent sequences in a discrete metric space?
\end{ques}

\section{Continuous maps}
\begin{abuse}
	For a function $f$ and its argument $x$,
	we will begin abbreviating $f(x)$ to just $fx$
	when there is no risk of confusion.
\end{abuse}

In calculus you were also told (or have at least heard) of what it means for a function to be continuous. Probably something like
\begin{quote}
	A function $f : \RR \to \RR$ is continuous at a point $p \in \RR$ if for every $\eps > 0$ there exists a $\delta > 0$ such that
	$\left\lvert x-p \right\rvert < \delta
		\implies
		\left\lvert fx - fp \right\rvert < \eps
	$.
\end{quote}
\begin{ques}
	Can you guess what the corresponding definition for metric spaces is?
\end{ques}

All we have do is replace the absolute values with the more general distance functions: this gives us a definition of continuity for any function $M \to N$.

\begin{definition}
	Let $M = (M, d_M)$ and $N = (N, d_N)$ be metric spaces.
	A function $f : M \to N$ is \vocab{continuous} at a point $p \in M$
	if for every $\eps > 0$ there exists a $\delta > 0$ such that
	\[ d_M(x,p) < \delta \implies d_N(fx, fp) < \eps. \]
	Moreover, the entire function $f$ is continuous if it is continuous at every point $p \in M$.
\end{definition}
Notice that, just like in our definition of an isomorphism of a group,
we use the metric of $M$ for one condition
and the metric of $N$ for the other condition.

This generalization is nice because it tells us immediately how we could carry over continuity arguments in $\RR$ to more general spaces like $\CC$.
Nonetheless, this definition is kind of cumbersome to work with,
because it makes extensive use of the real numbers
(epsilons and deltas).
Here is an equivalent condition.
\begin{theorem}[Sequential continuity]
	\label{thm:seq_cont}
	A function $f : M \to N$ of metric spaces is continuous at a point $p \in M$
	if and only if the following property holds:
	if $x_1$, $x_2$, \dots is a sequence in $M$ converging to $p$,
	then the sequence $f(x_1)$, $f(x_2)$, \dots in $N$ converges to $f(p)$.
\end{theorem}
\begin{proof}
	It's not too hard to see that $\eps$-$\delta$ continuity implies sequential continuity.
	The reverse direction is trickier and left as \Cref{prob:sequential}.
\end{proof}

Example application showcasing the niceness of sequential continuity:
\begin{proposition}[Composition of continuous functions is continuous]
	Let $f : M \to N$ and $g : N \to L$ be continuous maps of metric spaces.
	Then their composition $g \circ f$ is continuous.
\end{proposition}
\begin{proof}
	Dead simple with sequences:
	Let $p \in M$ be arbitrary and let $x_n \to p$ in $M$.
	Then $fx_n \to fp$ in $N$ and $gfx_n \to gfp$ in $L$, QED.
\end{proof}

\begin{ques}
	Let $M$ be any metric space and $D$ a discrete space.
	When is a map $f : D \to M$ continuous?
\end{ques}



\section{Homeomorphisms}
When do we consider two groups to be the same?
Answer: if there's a structure-preserving map
between them which is also a bijection.
For metric spaces, we do exactly the same thing,
but replace ``structure-preserving'' with ``continuous''.

\begin{definition}
	Let $M$ and $N$ be metric spaces.
	A function $f : M \to N$ is a
	\vocab{homeomorphism} if it is a bijection,
	and both $f : M \to N$ and its inverse $f\inv : N \to M$ are continuous.
	We say $M$ and $N$ are \vocab{homeomorphic}.
\end{definition}
Needless to say, homeomorphism is an equivalence relation.

You might be surprised that we require $f\inv$ to also be continuous.
Here's the reason: you can show that if $\phi$ is
an isomorphism of groups, then $\phi\inv$ also preserves the group operation,
hence $\phi\inv$ is itself an isomorphism.
The same is not true for continuous bijections,
which is why we need the new condition.
\begin{example}
	[Homeomorphism $\neq$ continuous bijection]
	\listhack
	\begin{enumerate}[(a)]
		\ii There is a continuous bijection
		from $[0,1)$ to the circle, % chktex 9
		but it has no continuous inverse.
		\ii Let $M$ be a discrete space with size $|\RR|$.
		Then there is a continuous function $M \to \RR$
		which certainly has no continuous inverse.
	\end{enumerate}
\end{example}

Note that this is the topologist's definition of ``same'' --
homeomorphisms are ``continuous deformations''.
Here are some examples.

\begin{example}[Examples of homeomorphisms]
	\listhack
	\begin{enumerate}[(a)]
		\ii Any space $M$ is homeomorphic to itself
		through the identity map.
		\ii The old saying: a doughnut (torus) is
		homeomorphic to a coffee cup.
		(Look this up if you haven't heard of it.)
		\ii The unit circle $S^1$ is homeomorphic
		to the boundary of the unit square.
		Here's one bijection between them, after an appropriate scaling:
		\begin{center}
			\begin{asy}
				size(1.5cm);
				draw(unitcircle);
				pair A = (1.4, 1.4);
				pair B = rotate(90)*A;
				pair C = rotate(90)*B;
				pair D = rotate(90)*C;
				draw(A--B--C--D--cycle);
				dot(origin);
				pair P = Drawing(dir(70));
				pair Q = Drawing(extension(origin, P, A, B));
				draw(origin--Q, dashed);
			\end{asy}
		\end{center}
	\end{enumerate}
\end{example}
\begin{example}
	[Metrics on the unit circle]
	It may have seemed strange that our metric function on $S^1$
	was the one inherited from $\RR^2$,
	meaning the distance between two points
	on the circle was defined to be the length of the chord.
	Wouldn't it have made more sense to use the circumference of the
	smaller arc joining the two points?

	In fact, it doesn't matter:
	if we consider $S^1$ with the ``chord'' metric
	and the ``arc'' metric, we get two homeomorphic spaces,
	as the map between them is continuous.

	The same goes for $S^{n-1}$ for general $n$.
\end{example}

\begin{example}
	[Homeomorphisms really don't preserve size]
	Surprisingly, the open interval $(-1,1)$
	is homeomorphic to the real line $\RR$!
	One bijection is given by
	\[ x \mapsto \tan(\pi/2 x) \]
	with the inverse being given by $t \mapsto \frac2\pi \arctan(t)$.

	This might come as a surprise,
	since $(-1,1)$ doesn't look that much like $\RR$;
	the former is ``bounded'' while the latter is ``unbounded''.
\end{example}

\begin{example}[Product metrics]
	Let $M = (M, d_M)$ and $N = (N, d_N)$ be metric spaces (say, $M = N = \RR$).
	Let $p_i = (x_i,y_i) \in M \times N$ for $i=1,2$.
	Consider the following metrics on the set of points $M \times N$:
	\begin{itemize}
		\ii $d_{\text{max}} ( p_1, p_2 )
			= \max \left\{ d_M(x_1, x_2), d_N(y_1, y_2) \right\}$.
		\ii $d_{\text{Euclid}} ( p_1, p_2 )
			= \sqrt{d_M(x_1,x_2)^2 + d_N(y_1, y_2)^2}$.
		\ii $d_{\text{taxicab}} \left( p_1, p_2 \right)
			= d_M(x_1, x_2) + d_N(y_1, y_2)$.
	\end{itemize}
	It's easy to verify that
	\[ d_{\text{max}}(p_1,p_2)
		\le d_{\text{Euclid}}(p_1, p_2)
		\le d_{\text{taxicab}}(p_1, p_2)
		\le 2d_{\text{max}}(p_1, p_2). \]
	Using this you can show that
	\[
		(M \times N, d_{\text{max}}), \qquad
		(M \times N, d_{\text{Euclid}}), \qquad
		(M \times N, d_{\text{taxicab}})
	\]
	are homeomorphic,
	with the homeomorphism being just the identity map.
	Hence we will usually simply refer to \emph{the} metric on $M \times N$,
	called the \vocab{product metric},
	and it will not be important which metric we select.
\end{example}

\section{Open and closed sets}

\subsection{Open sets}
\prototype{The open disk $x^2+y^2<r^2$ in $\RR^2$.}

Continuity is really about what happens ``locally'':
how a function behaves ``close to a certain point $p$''.
One way to capture this notion of ``closeness''
is to use metrics as we've done above.
In this way we can define a neighborhood of a point.

\begin{definition}
	Let $M$ be a metric space.
	For each real number $r > 0$ and point $p \in M$, we define
	\[ M_r(p) \defeq \left\{ x \in M: d(x,p) < r \right\}. \]
	The set $M_r(p)$ is called an \vocab{$r$-neighborhood} of $p$.
\end{definition}
\begin{center}
	\begin{asy}
		size(4cm);
		bigblob("$M$");
		pair p = Drawing("p", (0.3,0.1), dir(-90));
		real r = 1.8;
		draw(CR(p,r), dashed);
		label("$M_r(p)$", p+r*dir(-65), dir(-65));
		draw(p--(p+r*dir(130)));
		label("$r$", midpoint(p--(p+r*dir(130))), dir(40));
	\end{asy}
\end{center}

We can rephrase convergence more succinctly in terms of $r$-neighborhoods.
Specifically, a sequence $(x_n)$ converges to $x$
if for every $r$-neighborhood of $x$,
all terms of $x_n$ eventually stay within that $r$-neighborhood.

Let's try to do the same with functions.
\begin{ques}
	In terms of $r$-neighborhoods,
	what does it mean for a function $f \colon M \to N$
	to be continuous at a point $p \in M$?
\end{ques}

Essentially, we require that the pre-image of every $\eps$-neighborhood has
the property that some $\delta$-neighborhood exists inside it.
This motivates:
\begin{definition}
	A set $U \subseteq M$ is \vocab{open} in $M$
	if for each $p \in U$, some $r$-neighborhood of $p$
	is contained inside $U$.
	In other words, there exists $r>0$ such that $M_r(p) \subseteq U$.
\end{definition}
\begin{abuse}
	Note that a set being open is defined
	\emph{relative to} the parent space $M$.
	However, if $M$ is understood we can abbreviate
	``open in $M$'' to just ``open''.
\end{abuse}

\begin{figure}[ht]
	\centering
	\begin{asy}
		size(5cm);
		draw(unitcircle, dashed);
		pair P = Drawing("p", (0.6,0.2), dir(-90));
		draw(CR(P, 0.3), dotted);
		MP("x^2+y^2<1", dir(45), dir(45));
	\end{asy}
	\caption{The set of points $x^2+y^2<1$ in $\RR^2$ is open in $\RR^2$.}
	\label{fig:example_open}
\end{figure}

\begin{example}[Examples of open sets]
	\listhack
	\begin{enumerate}[(a)]
		\ii Any $r$-neighborhood of a point is open.
		\ii Open intervals of $\RR$ are open in $\RR$, hence the name!
		This is the prototypical example to keep in mind.
		\ii The open unit ball $B^n$ is open in $\RR^n$ for the same reason.
		\ii In particular, the open interval $(0,1)$ is open in $\RR$.
		However, if we embed it in $\RR^2$, it is no longer open!
		\ii The empty set $\varnothing$ and the whole set of points $M$ are open in $M$.
	\end{enumerate}
\end{example}
\begin{example}
	[Non-Examples of open sets]
	\listhack
	\begin{enumerate}[(a)]
		\ii The closed interval $[0,1]$ is not open in $\RR$.
		There is no neighborhood of the point $0$ which is contained in $[0,1]$.
		\ii The unit circle $S^1$ is not open in $\RR^2$.
	\end{enumerate}
\end{example}
\begin{ques}
	What are the open sets of the discrete space?
\end{ques}

Here are two quite important properties of open sets.
\begin{proposition}
	[Intersections and unions of open sets]
	\listhack
	\begin{enumerate}[(a)]
		\ii The intersection of finitely many open sets is open.
		\ii The union of open sets is open, even if there are infinitely many.
	\end{enumerate}
\end{proposition}
\begin{ques}
	Convince yourself this is true.
\end{ques}
\begin{exercise}
	Exhibit an infinite collection of open sets in $\RR$
	whose intersection is the set $\{0\}$.
	This implies that infinite intersections of open sets are not necessarily open.
\end{exercise}

The whole upshot of this is:
\begin{theorem}[Open set condition]
	\label{thm:open_set}
	A function $f \colon M \to N$ of metric spaces is continuous
	if and only if the pre-image of every open set in $N$ is open in $M$.
\end{theorem}
\begin{proof}
	I'll just do one direction\dots
	\begin{exercise}
		Show that $\delta$-$\eps$ continuity follows from
		the open set continuity.
	\end{exercise}
	Now assume $f$ is continuous.
	First, suppose $V$ is an open subset of the metric space $N$;
	let $U = f\pre(V)$. Pick $x \in U$, so $y = f(x) \in V$; we want a neighborhood of $x$ inside $U$.

	\begin{center}
		\begin{asy}
			size(12cm);
			bigblob("$N$");
			pair Y = Drawing("y", origin, dir(75));
			real eps = 1.5;
			draw(CR(Y, eps), dotted);
			label("$\varepsilon$", D(Y--(Y+eps*dir(255))));
			label("$V$",
				D(shift(-0.5,0)*rotate(190)*scale(3.2,2.8)*unitcircle, dashed));
			add(shift( (13,0) ) * CC());
			label("$f$", D( (4.5,0)--(8,0), EndArrow));

			bigblob("$M$");
			real delta = 1.1;
			pair X = Drawing("x", (-1.5,-0.5), dir(-45));
			label("$\delta$", D(X--(X+delta*dir(155))));
			draw(CR(X, delta), dotted);
			label("$U = f^{\text{pre}}(V)$",
				D(shift(-1.5,-0.3)*rotate(235)*scale(2.4,1.8)*unitcircle, dashed));
		\end{asy}
	\end{center}

	As $V$ is open, there is some small $\eps$-neighborhood around $y$
	which is contained inside $V$.
	By continuity of $f$, we can find a $\delta$ such that the $\delta$-neighborhood
	of $x$ gets mapped by $f$ into the $\eps$-neighborhood in $N$,
	which in particular lives inside $V$.
	Thus the $\delta$-neighborhood lives in $U$, as desired.
\end{proof}

%From this we can get a new definition of homeomorphism
%which makes it clear why open sets are good things to consider.
%\begin{theorem}
%	[Open set formulation of homeomorphism]
%	A function $f \colon M \to N$ of metric spaces is a
%	homeomorphism if and only if
%	\begin{enumerate}[(i)]
%		\ii It is a bijection of the underlying points.
%		\ii It induces a bijection of the open sets of $M$ and $N$:
%		for any open set $U \subseteq M$ the set $f\im(U)$ is open,
%		and for any open set $V \subseteq N$ the set $f\pre(V)$ is open.
%	\end{enumerate}
%\end{theorem}

\subsection{Closed sets}
\prototype{The closed unit disk $x^2+y^2 \le r^2$ in $\RR^2$.}
It would be criminal for me to talk about open sets
without talking about closed sets.
The name ``closed'' comes from the definition in a metric space.
\begin{definition}
	Let $M$ be a metric space.
	A subset $S \subseteq M$ is \vocab{closed} in $M$ if the following property holds:
	let $x_1$, $x_2$, \dots be a sequence of points in $S$
	and suppose that $x_n$ converges to $x$ in $M$.
	Then $x \in S$ as well.
\end{definition}
\begin{abuse}
	Same caveat: we abbreviate ``closed in $M$'' to just ``closed''
	if the parent space $M$ is understood.
\end{abuse}
Here's another way to phrase it.
The \vocab{limit points} of a subset $S \subseteq M$ are defined by
\[ \lim S \defeq \left\{ p \in M :
	\exists (x_n) \in S \text{ such that } x_n \to p \right\}. \]
Thus $S$ is closed if and only if $S = \lim S$.

\begin{exercise}
	Prove that $\lim S$ is closed even if $S$ isn't closed. (Draw a picture.)
\end{exercise}
For this reason, $\lim S$ is also called the
\vocab{closure} of $S$ in $M$, and denoted $\ol S$.
It is simply the smallest closed set which contains $S$.

\begin{example}
	[Examples of closed sets]
	\listhack
	\begin{enumerate}[(a)]
		\ii The empty set $\varnothing$ is closed in $M$ for vacuous reasons:
		there are no sequences of points with elements in $\varnothing$.
		\ii The entire space $M$ is closed in $M$ for tautological reasons.
		(Verify this!)
		\ii The closed interval $[0,1]$ in $\RR$ is closed in $\RR$, hence the name.  Like with open sets, this is the prototypical example of a closed set to keep in mind!
		\ii In fact, the closed interval $[0,1]$ is even closed in $\RR^2$.
	\end{enumerate}
\end{example}
\begin{example}
	[Non-examples of closed sets]
	Let $S=(0,1)$ denote the open interval.
	Then $S$ is not closed in $\RR$
	because the sequence of points
	\[
		\frac12, \;
		\frac14, \;
		\frac18, \;
		\dots
	\]
	converges to $0 \in \RR$, but $0 \notin (0,1)$.
\end{example}

I should now warn you about a confusing part of this terminology.
Firstly, \textbf{``most'' sets are neither open nor closed}.
\begin{example}[A set neither open nor closed]
	The half-open interval $[0,1)$ %chktex 9
	is neither open nor closed in $\RR$.
\end{example}
Secondly, it's \textbf{also possible for a set to be both open and closed};
this will be discussed in \Cref{ch:top_more}.

The reason for the opposing terms is the following theorem:
\begin{theorem}[Closed sets are complements of open sets]
	Let $M$ be a metric space, and $S \subseteq M$ any subset.
	Then the following are equivalent:
	\begin{itemize}
		\ii The set $S$ is closed in $M$.
		\ii The complement $M \setminus S$ is open in $M$.
	\end{itemize}
\end{theorem}
\todo{prove it yourself lazy bum}
\begin{exercise}
	Prove this theorem!
	You'll want to draw a picture to make it clear what's happening: for example,
	you might take $M = \RR^2$ and $S$ to be the closed unit disk.
\end{exercise}

\section{Two metric niceness adjectives --- bounded, complete}
We provide a couple niceness adjectives that applies to
\emph{entire metric spaces}, rather than just a set relative to a parent space.

\subsection{Boundedness}
\prototype{$[0,1]$ is bounded but $\RR$ is not.}
Here is one notion of how to prevent a metric space
from being a bit too large.

\begin{definition}
	A metric space $M$ is \vocab{bounded}
	if there is a constant $D$ such that $d(p,q) \le D$ for all $p,q \in M$.
\end{definition}
You can change the order of the quantifiers:
\begin{proposition}
	[Boundedness with radii instead of diameters]
	A metric space $M$ is bounded if and only if
	for every point $p \in M$, there is a radius $R$
	(possibly depending on $p$) such that $d(p,q) \le R$.
\end{proposition}
\begin{exercise}
	Use the triangle inequality to show these are equivalent.
	(The names ``radius'' and ``diameter'' are a big hint!)
\end{exercise}

\begin{example}
	[Examples of bounded spaces]
	\listhack
	\begin{enumerate}[(a)]
		\ii Finite intervals like $[0,1]$ and $(a,b)$ are bounded.
		\ii The unit square $[0,1]^2$ is bounded.
		\ii $\RR^n$ is not bounded for any $n \ge 1$.
		\ii A discrete space on an infinite set is bounded.
		\ii $\NN$ is not bounded, despite being
		homeomorphic to the discrete space!
	\end{enumerate}
\end{example}

The fact that a discrete space on an infinite set
is ``bounded'' might be upsetting to you, so
here is a somewhat stronger condition you can use:

\begin{definition}
	A metric space is \vocab{totally bounded}
	if for any $\eps > 0$,
	we can cover $M$ with finitely many $\eps$-neighborhoods.
\end{definition}
For example, if $\eps = 1/2$, you can cover $[0,1]^2$
by $\eps$-neighborhoods.
\begin{center}
	\begin{asy}
		size(4cm);
		draw(shift( (-0.5,-0.5) )*unitsquare, black+1);
		real d = 0.4;
		real r = 0.5;
		draw(CR(dir( 45)*d, r), dotted);
		draw(CR(dir(135)*d, r), dotted);
		draw(CR(dir(225)*d, r), dotted);
		draw(CR(dir(315)*d, r), dotted);
	\end{asy}
\end{center}
\begin{exercise}
	Show this ``totally bounded'' implies ``bounded''.
\end{exercise}
\begin{example}
	[Examples of totally bounded spaces]
	\listhack
	\begin{enumerate}[(a)]
		\ii A subset of $\RR^n$ is bounded if and only if
		it is totally bounded.

		This is for Euclidean geometry reasons:
		for example in $\RR^2$ if I can cover a set
		by a single disk of radius $2$,
		then I can certainly cover it by finitely many
		disks of radius $1/2$.
		(We won't prove this rigorously.)

		\ii So for example $[0,1]$ or $[0,2] \times [0,3]$
		is totally bounded.

		\ii In contrast, a discrete space on
		an infinite set is not totally bounded.
	\end{enumerate}
\end{example}

\subsection{Completeness}
\prototype{$\RR$ is complete, but $\QQ$ and $(0,1)$ are not.}

So far we can only talk about sequences converging if they have a limit.
But consider the sequence 
\[ x_1 = 1, \; x_2 = 1.4, \; x_3 = 1.41, \; x_4 = 1.414, \dots. \]
It converges to $\sqrt 2$ in $\RR$, of course.
But it fails to converge in $\QQ$;
there is no \emph{rational} number this sequence converges to.
And so somehow, if we didn't know about the existence of $\RR$, we would
have \emph{no idea} that the sequence $(x_n)$ is ``approaching'' something.

That seems to be a shame.
Let's set up a new definition to describe these sequences whose terms
\textbf{get close to each other},
even if they don't approach any particular point in the space.
Thus, we only want to mention the given points in the definition.

\begin{definition}
	Let $x_1, x_2, \dots$ be a sequence which lives in a metric space $M = (M,d_M)$.
	We say the sequence is \vocab{Cauchy} if for any $\eps > 0$, we have
	\[ d_M(x_m, x_n) < \eps \]
	for all sufficiently large $m$ and $n$.
\end{definition}

\begin{ques}
	Show that a sequence which converges is automatically Cauchy.
	(Draw a picture.)
\end{ques}

Now we can define:
\begin{definition}
	A metric space $M$ is \vocab{complete} if every
	Cauchy sequence converges.
\end{definition}

\begin{example}
	[Examples of complete spaces]
	\listhack
	\begin{enumerate}[(a)]
		\ii $\RR$ is complete.
		(Depending on your definition of $\RR$,
		this either follows by definition, or requires some work.
		We won't go through this here.)
		\ii The discrete space is complete,
		as the only Cauchy sequences are eventually constant.
		\ii The closed interval $[0,1]$ is complete.
		\ii $\RR^n$ is complete as well.
		(You're welcome to prove this by induction on $n$.)
	\end{enumerate}
\end{example}

\begin{example}
	[Non-examples of complete spaces]
	\listhack
	\begin{enumerate}[(a)]
		\ii The rationals $\QQ$ are not complete.
		\ii The open interval $(0,1)$ is not complete,
		as the sequence $0.9$, $0.99$, $0.999$, $0.9999$, \dots
		is Cauchy but does not converge.
	\end{enumerate}
\end{example}

So, metric spaces need not be complete, like $\QQ$.
But we certainly would like them to be complete,
and in light of the following theorem this is not unreasonable.
\begin{theorem}
	[Completion]
	Every metric space can be ``completed'',
	i.e.\ made into a complete space by adding in some points.
\end{theorem}
We won't need this construction at all,
so it's left as \Cref{prob:completion}.
\begin{example}
	The completion of $\QQ$ is $\RR$
	(in fact, this is often taken as the definition of $\RR$).
\end{example}

\subsection{Let the buyer beware}
There is something suspicious about both these notions.

\begin{example}
	[Something fishy is going on here]
	\label{ex:fishy}
	Let $M = (0,1)$ and $N = \RR$.
	As we saw much earlier $M$ and $N$ are homeomorphic.
	However:
	\begin{itemize}
		\ii $(0,1)$ is totally bounded, but not complete.
		\ii $\RR$ is complete, but not bounded.
	\end{itemize}
\end{example}

So neither of these new adjectives is preserved under homeomorphism!
This is the first hint of something going awry with the metric.
As we progress further into our study of topology,
we will see that it is in fact open and closed sets,
which we motivated by using the metric,
are the notion that will really shine later on.
I insist on introducing the metric first so that
the standard pictures of open and closed sets make sense,
but eventually it is time to remove the training wheels.

%It's a theorem that $\RR$ is complete.
%To prove this I'd have to define $\RR$ rigorously, which I won't do here.
%In fact, there are some competing definitions of $\RR$.
%It is sometimes defined as the completion of the space $\QQ$.
%Other times it is defined using something called \emph{Dedekind cuts}.
%For now, let's just accept that $\RR$ behaves as we expect and is complete.

%And thus, I can now tell you exactly what $\RR$ is.
%You might notice that it's actually not that easy to define:
%we can define $\QQ = \left\{ a/b : a,b \in \NN \right\}$, but
%what do we say for $\RR$?
%Here's the answer:
%\begin{definition}
%	$\RR$ is the completion of the metric space $\QQ$.
%\end{definition}

\section{Subspaces, and (inb4) a confusing linguistic point}
\prototype{A circle is obtained as a subspace of $\RR^2$.}

As we've already been doing implicitly in examples, we'll now say:
\begin{definition}
	Every subset $S \subseteq M$ is a metric space in its own right,
	by re-using the distance function on $M$.
	We say that $S$ is a \vocab{subpsace} of $M$.
\end{definition}
For example, we saw that the circle $S^1$
is just a subspace of $\RR^2$.

It thus becomes important to distinguish between
\begin{enumerate}[(i)]
	\ii \textbf{``absolute'' adjectives} like ``complete'' or ``bounded'',
	which can be applied to both spaces,
	and hence even to subsets of spaces (by taking a subspace),
	and
	\ii \textbf{``relative'' adjectives}
	like ``open (in $M$)'' and ``closed (in $M$)'',
	which make sense only relative to a space,
	even though people are often sloppy and omit them.
\end{enumerate}
So ``$[0,1]$ is complete'' makes sense,
as does ``$[0,1]$ is a complete subset of $\RR$'',
which we take to mean ``$[0,1]$ is a complete as a subspace of $\RR$''.
This is since ``complete'' is an absolute adjective.

But here are some examples of ways in which relative adjectives
require a little more care:
\begin{itemize}
	\ii Consider the sequence $1$, $1.4$, $1.41$, $1.414$, \dots.
	Viewed as a sequence in $\RR$, it converges to $\sqrt 2$.
	But if viewed as a sequence in $\QQ$,
	this sequence does \emph{not} converge!
	Similarly, the sequence $0.9$, $0.99$, $0.999$, $0.9999$
	does not converge in the space $(0,1)$,
	although it does converge in $[0,1]$.

	The fact that these sequences fail to converge
	even though they ``ought to'' is weird and bad,
	and was why we defined complete spaces to begin with.

	\ii In general, it makes no sense to ask a question like ``is $[0,1]$ open?''.
	The questions ``is $[0,1]$ open in $\RR$?''
	and ``is $[0,1]$ open in $[0,1]$?'' do make sense, however.
	The answer to the first question is ``no''
	but the answer to the second question is ``yes'';
	indeed, every space is open in itself.
	Similarly, $[0, \half)$ is an open set % chktex 9
	in the space $M = [0,1]$
	because it is the ball \emph{in $M$}
	of radius $\half$ centered at $0$.

	\ii Dually, it doesn't make sense to ask ``is $[0,1]$ closed''?
	It is closed \emph{in $\RR$} and \emph{in itself}
	(but every space is closed in itself, anyways).
\end{itemize}

%Thus to list out all four cases:
%\begin{itemize}
%	\ii The statement ``$[0,1]$ is complete'' makes sense (and is true);
%	it says that $[0,1]$ is a complete metric space.
%	\ii The statement ``$[0,1]$ is a complete subset of $\RR$'' is valid;
%	it says that the subspace $[0,1]$ of $\RR$ is a complete metric space.
%	\ii The statement ``$[0,1]$ is a closed subset of $\RR$'' makes sense;
%	it says that the set of points $[0,1]$ form a closed subset of a parent space $\RR$.
%	\ii The statement ``$[0,1]$ is closed'' does \emph{not} make sense officially.
%	Closed sets are only defined relative to parent spaces.
%\end{itemize}

To make sure you understand the above,
here are two exercises to help you practice relative adjectives.

\begin{exercise}
	Let $M$ be a complete metric space and let $S \subseteq M$.
	Prove that $S$ is complete if and only if it is closed in $M$.
	% (This is obvious once you figure out what the question is asking.)
	In particular, $[0,1]$ is complete.
\end{exercise}
\begin{exercise}
	Let $M = [0,1] \cup (2,3)$.
	Show that $[0,1]$ and $(2,3)$ are both open and closed in $M$.
\end{exercise}

This illustrates a third point:
a nontrivial set can be both open and closed\footnote{Which
	always gets made fun of.}
As we'll see in \Cref{ch:top_more}, this implies the space is disconnected;
i.e.\ the only examples look quite like the one we've given above.

\section{\problemhead}
\begin{problem}
	Let $M = (M,d)$ be a metric space.
	Check that \[ d \colon M \times M \to \RR \]
	itself a continuous function
	(where $M \times M$ is equipped with the product metric).
\end{problem}

\begin{problem}
	Are $\QQ$ and $\NN$ homeomorphic subspaces of $\RR$?
	\begin{hint}
		No.
	\end{hint}
	\begin{sol}
		In $\QQ$, no singleton set is open,
		whereas in $\NN$, they all are (in fact $\NN$ is discrete).
	\end{sol}
\end{problem}

\begin{problem}
	\label{prob:sequential}
	Show that sequentially continuous at $p$ implies $\eps$-$\delta$ continuous at $p$,
	as in \Cref{thm:seq_cont}.
	\begin{hint}
		Use contradiction. Only take $\delta$ of the form $1/k$, for $k \in \ZZ$.
	\end{hint}
	\begin{sol}
		Assume for contradiction that there is a bad $\eps_0 > 0$,
		meaning that for any $\delta$, there is a $x \in M$ which is within $\delta$
		of $p \in M$ but $f(x)$ is at least $\eps$ away from $f(p) \in N$.
		For $\delta = 1/k$ let $x_k$ be the said counterexample.
		Then $x_k$ converges to $p$ (by triangle inequality) so
		$f(x_k)$ is supposed to converge to $f(p)$,
		which is impossible by construction since the $f(x_k)$ 
		are at least $\eps_0$ away from $f(p)$.
	\end{sol}
\end{problem}

\begin{problem}
	[Henning Makholm,
	on \href{https://math.stackexchange.com/a/3051746/229197}{math.SE}]
	Let $M$ be the metric space on $\RR$ with metric
	given by $d(x,y) = \min \left( 1, \left\lvert x-y \right\rvert \right)$.
	\begin{enumerate}[(a)]
		\ii Show that $M$ is both complete and bounded.
		\ii Show that $M \cong (0,\infty)$,
		the latter of which is \emph{neither} complete nor bounded!
	\end{enumerate}
	\begin{hint}
		Part (a) is essentially by definition:
		the same sequences converge in both metrics and bounded is by construction.
		For (b), I think it is easiest to show
		\[ M \taking{\id} \RR \taking{e^x} (0,\infty) \]
		are homeomorphisms.
		(Incidentally, each arrow eliminates one property.)
	\end{hint}
\end{problem}

\begin{problem}
	Exhibit a function $f \colon \RR \to \RR$ such that
	$f$ is continuous at $x \in \RR$ if and only if $x=0$.
	\begin{hint}
		$\pm x$ for good choices of $\pm$.
	\end{hint}
	\begin{sol}
		Let $f(x) = x$ for $x \in \QQ$ and $f(x) = -x$ for irrational $x$.
	\end{sol}
\end{problem}

\begin{dproblem}[Banach fixed point theorem]
	Let $M = (M,d)$ be a complete metric space.
	Suppose $T : M \to M$ is a continuous map such that for any $p,q \in M$,
	\[ d\left( T(p), T(q) \right) < 0.999 d(p,q). \]
	(We call $T$ a \vocab{contraction}.)
	Show that $T$ has a unique fixed point.
\end{dproblem}

\begin{problem}
	\yod
	Prove that a function $f \colon \RR \to \RR$ which is strictly increasing
	must be continuous at some point.
	\begin{hint}
		Project gaps onto the $y$-axis.
		Use the fact that uncountably many positive reals cannot have finite sum.
	\end{hint}
	\begin{sol}
		Assume for contradiction it is completely discontinuous;
		by scaling set $f(0) = 0$, $f(1) = 1$ and focus just on $f : [0,1] \to [0,1]$.
		Since it's discontinuous everywhere,
		for every $x \in [0,1]$ there's an $\eps_x > 0$
		such that the continuity condition fails.
		Since the function is strictly increasing,
		that can only happen if the
		function misses all $y$-values in the interval
		$(fx-\eps_x, fx)$ or $(fx, fx+\eps_x)$ (or both).

		Projecting these missing intervals to the $y$-axis you find uncountably
		many intervals (one for each $x \in [0,1]$) all of which are disjoint.
		In particular, summing the $\eps_x$ you get that a sum of uncountably
		many positive reals is $1$.

		But in general it isn't possible for an uncountable family $\mathcal F$
		of positive reals to have finite sum.
		Indeed, just classify the reals into buckets $\frac1k \le x < \frac1{k-1}$.
		If the sum is actually finite then each bucket is finite,
		so the collection $\mathcal F$ must be countable, contradiction.
	\end{sol}
\end{problem}

\begin{dproblem}[Completion of a metric space]
	\yod
	\label{prob:completion}
	Let $M$ be a metric space.
	Construct a complete metric space $\ol M$
	such that $M$ is a subspace of $\ol M$,
	and every open set of $\ol M$ contains a point of $M$
	(meaning $M$ is \vocab{dense} in $\ol M$).
	\begin{hint}
		As a set, we let $\ol M$ be the sequence of Cauchy
		sequences $(x_n)$ in $M$, modulo the relation that
		$(x_n) \sim (y_n)$ if $\lim_n d(x_n, y_n) = 0$.
	\end{hint}
\end{dproblem}

